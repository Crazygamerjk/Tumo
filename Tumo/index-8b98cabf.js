import{n as l,V as p,B as o,s as y,C as Te,D as W,E as De,F as Ie,S as Me,H as h,m as _,I as G,J as te,K as Ee,L,c as u,M as U,N as ie,x as se,q as Ve,O as F,P as Oe,Q as $e,X as ne,t as Re,u as Fe,v as ze,Y as Pe,Z as Be,w as je,T as Le,z as Ue,A as qe}from"./sentry-24cb811c.js";import{V as ae,c as m,G as Ne,f as oe,a as Q,T as We,b as Ge}from"./TFileUploader-4533c4ac.js";import{i as Qe,A as He,l as E,s as V,T as O,a as re,b as Xe,c as Ye,d as Je,V as le,e as ce,S as de,f as ue,Y as ve,g as I,h as pe,v as Ze,j as Ke,L as me,k as _e,m as he,_ as et}from"./word_picker_icon-03dc20c1.js";import{d as tt,g as ge}from"./objects-e4fd392f.js";import{L as H,H as it,s as we}from"./index-ea716d84.js";import{P as st,a as X}from"./prism-tomorrow-a09f674a.js";import{h as D,c as nt,l as S}from"./arrays-f0e989b7.js";import{X as $,S as at}from"./SlotMachine-aa762912.js";import{a as ot}from"./fileImport-35765efa.js";import{T as rt}from"./google-tag-manager-9aed30fb.js";const lt={name:"viewer-progress-bar",props:{progress:{type:Number,default:0}}};var ct=function(){var e=this,i=e._self._c;return i("div",{staticClass:"viewer-progress-bar"},[i("v-progress-linear",{staticClass:"viewer-progress-bar-progress",model:{value:e.progress,callback:function(s){e.progress=s},expression:"progress"}})],1)},dt=[],ut=l(lt,ct,dt,!1,null,null,null,null);const vt=ut.exports,pt=()=>({activityData:{},componentAnswers:p.observable({}),componentAnswersMetaData:p.observable({}),collaboratorInfo:p.observable({}),previewMode:!1,status:null,skill:null,activityId:null,activityType:null,submissionId:null,submitted:null,feedback:"",feedbackAttachments:[],language:null,allAnswers:{},allAnswerMetaData:{},rejectCount:0,isWarned:!1,isBlocked:!1,isAutoExamine:!1,disableScrolling:!1,dialogSubmitStatus:{status:{},state:!1}}),mt=(t,e)=>{t.previewMode=e},_t=(t,e)=>{t.activityId=e},ht=(t,e)=>{t.submissionId=e},gt=(t,e)=>{t.activityData=e},wt=(t,e)=>{t.activityData.title=e},ft=(t,e)=>{t.collaboratorInfo=e},bt=(t,e)=>{t.activityData.content=e},yt=(t,e)=>{t.activityData.icon=e},Ct=(t,e)=>{t.activityType=e},At=(t,e)=>{t.status=e},xt=(t,e)=>{t.feedback=e},kt=(t,e)=>{t.feedbackAttachments=e},St=(t,e)=>{t.submitted=e},Tt=(t,e)=>{t.language=e},Dt=(t,e)=>{t.allAnswers=e},It=(t,e)=>{t.allAnswerMetaData=e},Mt=(t,e)=>{t.rejectCount=e},Et=(t,e)=>{t.isBlocked=(e==null?void 0:e.status)===o.BLOCKED},Vt=(t,e)=>{t.isWarned=e},Ot=(t,e)=>{t.isAutoExamine=e},$t=(t,e)=>{t.dialogSubmitStatus=e},Rt=(t,e)=>{t.skill=Array.isArray(e)&&e[0]?e[0]:e},Ft=(t,e)=>{p.set(t.componentAnswers,e.componentId,p.observable(e))},zt=(t,{componentId:e,componentType:i,content:s})=>{t.componentAnswers[e].componentType=i,t.componentAnswers[e].content=p.observable(s)},Pt=(t,e)=>{p.set(t.componentAnswersMetaData,e.componentId,p.observable(e))},Bt=(t,{componentId:e,componentType:i,content:s})=>{t.componentAnswersMetaData[e].componentType=i,t.componentAnswersMetaData[e].content=p.observable(s)},jt=(t,e)=>{t.disableScrolling=e},Lt=Object.freeze(Object.defineProperty({__proto__:null,setActivityCollaboratorInfo:ft,setActivityContent:bt,setActivityData:gt,setActivityIcon:yt,setActivityId:_t,setActivityTitle:wt,setActivityType:Ct,setAllAnswerMetaData:It,setAllAnswers:Dt,setComponentAnswer:Ft,setComponentAnswerMetaData:Pt,setComponentAnswerMetaDataValidationMetaData:Bt,setComponentAnswerValidationMetaData:zt,setFeedback:xt,setFeedbackAttachments:kt,setIsAutoExamine:Ot,setIsBlocked:Et,setIsWarned:Vt,setLanguage:Tt,setPreviewMode:mt,setRejectCount:Mt,setScrollingDisabled:jt,setSkills:Rt,setStatus:At,setSubmissionId:ht,setSubmitStatus:$t,setSubmitted:St},Symbol.toStringTag,{value:"Module"}));let f=null;const Ut=async()=>{if(f!==null)return f;const t=y("VITE_ACTIVITY_COLLABORATION_HUB_URL"),e=import.meta.NODE_ENV==="production"?H.None:H.Debug,i=new it().configureLogging(e).withAutomaticReconnect().withUrl(t,{accessTokenFactory:()=>Te}).build();return await i.start(),f=i,f},qt={plugin:({answerData:t})=>t.examinable?t.finished:!0,quiz:({content:t,status:e,answerData:i})=>t.optional?!0:i.selectedOptionId!==null&&e!==o.REJECTED&&(!t.autoExamine||e===o.AWARDED),slotMachine:({content:t,answerMetaData:e})=>e.slotMachinMetaData.length===t.slotData.content.length,task:({content:t,status:e,answerData:i})=>t.optional?!0:t.textAnswer&&!i.text.length||t.fileAnswer&&!i.attachments.length?!1:e!==o.REJECTED,wordPicker:({content:t,status:e,answerData:i})=>{const s=t.wordPickerData.filter(({type:a})=>a==="question").length;return Object.keys(i).length===s&&e!==o.REJECTED},multimediaQuiz:({content:t,status:e,answerData:i})=>t.optional?!0:i.selectedOptionId!==null&&e!==o.REJECTED&&(!t.autoExamine||e===o.AWARDED)},R=t=>ae.scrollTo(t,500,{offset:-110}),Nt=(t,e)=>{R(`[pageId="${e}"]`)},Wt=(t,e)=>{R(`[sectionId="${e}"]`)},Gt=(t,e)=>{R(`[groupId="${e}"]`)},Qt=(t,e)=>{R(`[componentId="${e}"]`)},Ht=async({commit:t,dispatch:e})=>{if(window.PREVIEW_DATA){t("setPreviewMode",!0),t("setActivityData",window.PREVIEW_DATA),t("setLanguage",window.PREVIEW_DATA.language);return}const i=W.pathname.split("/").pop(),s=W.searchParams.get("lang"),a=y(`VITE_LANGUAGE_OVERRIDE_${s.toUpperCase()}`)||s;if(!Qe(i)){if(window.opener&&window.opener.store.state.editor){t("setPreviewMode",!0),t("setActivityData",tt(window.opener.store.state.editor.activityData));return}throw new Error("No content provided to display")}if(!a)throw new Error("You have to provide language");await Ut(),await e("loadActivity",{activityId:i,language:a})},Xt=async({commit:t},{activityId:e,language:i,parentActivityId:s=null,collaboratorId:n=null,collaboratorActivityId:a=null})=>{try{t("setPreviewMode",!1),t("setActivityId",e);const c=await De(e,i,s,n);if(c.componentAnswers[i]||(c.componentAnswers[i]=[]),c.answerMetaData[i]||(c.answerMetaData[i]=[]),c.collaboratorId){const d=await Ie(c.collaboratorId);d.collaboratorActivityId=a,t("setActivityCollaboratorInfo",d)}si(t,c,i),(c.status===o.AWARDED||c.status===o.PENDING&&c.submitted!==null)&&t("setPreviewMode",!0);for(const d of c.componentAnswers[i])t("setComponentAnswer",{...d,componentType:null,content:null});for(const d of c.answerMetaData[i])t("setComponentAnswerMetaData",{...d,componentType:null,content:null});window.parent.postMessage("x-the-activity-viewer:ready","*")}catch(c){throw new Error(`Error loading activity ${e}: ${c}`)}},Yt=({commit:t,state:e},{componentId:i,componentType:s,content:n,defaultAnswers:a})=>{e.componentAnswers[i]?t("setComponentAnswerValidationMetaData",{componentId:i,componentType:s,content:n}):t("setComponentAnswer",{componentId:i,componentType:s,content:n,answerData:ge(a),status:o.PENDING,feedback:""})},Jt=({commit:t,state:e},{componentId:i,componentType:s,content:n,defaultAnswerMetaData:a})=>{e.componentAnswersMetaData[i]?t("setComponentAnswerMetaDataValidationMetaData",{componentId:i,componentType:s,content:n}):t("setComponentAnswerMetaData",{answerMetaData:ge(a),content:n,componentId:i,componentType:s})},Zt=({commit:t},e)=>{t("setSubmitStatus",{status:e,state:!0})},Kt=({commit:t})=>{t("setSubmitStatus",{status:{},state:!1})},ei=async({state:t})=>{try{return t.allAnswers[t.language]=Object.values(t.componentAnswers),t.allAnswerMetaData[t.language]=Object.values(t.componentAnswersMetaData),await Me(t.submissionId,t.language,{componentAnswers:t.allAnswers,answerMetaData:t.allAnswerMetaData}),!0}catch(e){return console.error(e),!1}},ti=({state:t,dispatch:e})=>{for(const i in t.componentAnswers){const s=t.componentAnswers[i],n=qt[s.componentType],a=n?n(s):!0;if(console.debug(s,n,a),!a)return e("scrollToComponent",i),e("openSnackBar",{status:"warning",text:"viewer.component-validation-message"}),!1}return!0},ii=()=>{try{window.parent.postMessage("x-the-activity-viewer:finish-activity","*")}catch(t){console.error(t)}};function si(t,e,i){t("setActivityTitle",e.title),t("setActivityType",e.type),t("setActivityContent",e.content),t("setActivityIcon",e.icon),t("setSubmissionId",e.submissionId),t("setStatus",e.status),t("setFeedback",e.feedback),t("setFeedbackAttachments",e.feedbackAttachments),t("setSubmitted",e.submitted),t("setSkills",e.skill),t("setLanguage",i),t("setAllAnswers",e.componentAnswers),t("setAllAnswerMetaData",e.answerMetaData),t("setRejectCount",e.rejectCount),t("setIsBlocked",e.blockHistory),t("setIsWarned",e.nextToLastSubmission),t("setIsAutoExamine",e.isAutoExamine)}const ni=Object.freeze(Object.defineProperty({__proto__:null,Startup:Ht,checkValidation:ti,closeActivtyViewer:ii,closeSubmitStatusDialog:Kt,loadActivity:Xt,openSubmitStatusDialog:Zt,registerComponent:Yt,registerMetaDataComponent:Jt,scrollToComponent:Qt,scrollToGroup:Gt,scrollToPage:Nt,scrollToSection:Wt,sendActivitySubmission:ei},Symbol.toStringTag,{value:"Module"})),ai=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),oi=()=>({state:pt(),mutations:Lt,actions:ni,getters:ai}),r="viewer",ri="data:image/png;base64,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";const li={name:"viewer-header",data(){return{avatarSize:64,serviceType:h}},props:{activityTitle:{type:String,default:"Activity title"},activityIconId:{type:String,default:""}},computed:{..._({collaboratorInfo:t=>t[r].collaboratorInfo,defaultLanguage:t=>t.defaultLanguage}),getCollaboratorPhotoStyles(){return`background-image: url(${this.collaboratorInfo.photoUrl||ri});`},getCollaboratorName(){const{locale:t}=this.$i18n,{firstName:e,lastName:i}=this.collaboratorInfo,s=G(e,t,this.defaultLanguage),n=G(i,t,this.defaultLanguage);return`${s} ${n}`}},methods:{composeFileUrl:m,sendCloseActivityMessage:we}};var ci=function(){var e=this,i=e._self._c;return i("div",{staticClass:"viewer-header"},[e.activityIconId?i("img",{staticClass:"viewer-header-icon",attrs:{src:e.composeFileUrl(e.activityIconId,e.serviceType)}}):i("v-avatar",{attrs:{color:"grey lighten-2",size:e.avatarSize}},[i("v-icon",{attrs:{color:"grey darken-1"}},[e._v(" landscape ")])],1),i("p",{staticClass:"viewer-header-title"},[e._v(" "+e._s(e.activityTitle)+" ")]),i("transition",{attrs:{mode:"out-in",name:"viewer-header-collaborators-fade"}},[e.collaboratorInfo.id?i("div",{staticClass:"viewer-header-collaborators"},[i("div",{staticClass:"viewer-header-collaborators-item d-flex justify-center align-end"},[i("div",{staticClass:"viewer-header-collaborators-item-circle d-flex align-center"},[i("div",{staticClass:"viewer-header-collaborators-item-photo",style:e.getCollaboratorPhotoStyles}),i("div",{staticClass:"viewer-header-collaborators-item-info"},[i("div",{staticClass:"viewer-header-collaborators-item-info-name"},[e._v(" "+e._s(e.getCollaboratorName)+" ")]),i("div",{staticClass:"viewer-header-collaborators-item-info-email"},[e._v(" "+e._s(e.collaboratorInfo.email)+" ")])])])])]):e._e()]),i("v-btn",{staticClass:"viewer-header-close-button",attrs:{icon:"",large:""},on:{click:e.sendCloseActivityMessage}},[i("v-icon",{attrs:{color:"#494952"}},[e._v(" close ")])],1)],1)},di=[],ui=l(li,ci,di,!1,null,null,null,null);const vi=ui.exports;const pi={name:"viewer-pagination",data(){return{activePage:0,cancelScroll:null}},props:{content:{type:Array,default:()=>[]},scroll:{type:Number,default:0}},methods:{scrollToPage(t){this.$store.dispatch("scrollToPage",t.id)}},watch:{scroll(){const e=this.scroll,i=document.getElementsByClassName("viewer-page"),s=i.length-1,n=i[s];for(let d=0;d<i.length;d++){const w=i[d],k=w.clientHeight,N=w.offsetTop-126;e>=N&&e<=N+k&&(this.activePage=d)}const a=n.clientHeight,c=n.offsetTop-126;e>c+a&&(this.activePage=s)}}};var mi=function(){var e=this,i=e._self._c;return i("div",{staticClass:"viewer-pagination"},[i("v-radio-group",{staticClass:"viewer-pagination-radio-group",model:{value:e.activePage,callback:function(s){e.activePage=s},expression:"activePage"}},e._l(e.content,function(s,n){return i("div",{key:n,staticClass:"viewer-pagination-radio-container"},[i("v-radio",{staticClass:"viewer-pagination-radio",attrs:{value:n},on:{click:function(a){return e.scrollToPage(s)}}})],1)}),0)],1)},_i=[],hi=l(pi,mi,_i,!1,null,null,null,null);const gi=hi.exports,v={props:{id:{type:String,default:""},type:{type:String,default:""},content:{type:Object,default:()=>({})},previewMode:{type:Boolean,default:!1}}};const wi={name:"viewer-audio-component",mixins:[v],data(){return{serviceType:h}},components:{AudioPlayer:He},methods:{composeFileUrl:m},computed:{linkifiedAnswerTextSafeHTML(){return E(V(this.content.citation))},viewerAudioComponentContainer(){return this.content.posterUrl?"":"viewer-audio-component-container-without-poster"},showAudio(){return this.content.posterUrl!==""||this.content.audioUrl!==""},fileType(){return`audio/${this.content.fileType}`},audioUrl(){return m(this.content.audioUrl,this.serviceType)}}};var fi=function(){var e=this,i=e._self._c;return i("div",{staticClass:"viewer-audio-component"},[e.showAudio?i("div",{staticClass:"viewer-audio-component-container",class:e.viewerAudioComponentContainer},[e.content.posterUrl?i("div",{staticClass:"viewer-audio-component-poster-container"},[i("img",{staticClass:"viewer-audio-poster-size",attrs:{loading:"lazy",src:e.composeFileUrl(e.content.posterUrl,e.serviceType)}})]):e._e(),e.content.audioUrl?i("div",{staticClass:"viewer-audio-component-player-container"},[i("AudioPlayer",{staticClass:"editor-audio-player-audio",attrs:{src:e.audioUrl,type:e.fileType}})],1):e._e()]):e._e(),e.content.soundCloudEmbed?i("div",{staticClass:"viewer-audio-embed-container",domProps:{innerHTML:e._s(e.content.soundCloudEmbed)}}):e._e(),e.content.citation?i("p",{staticClass:"viewer-loaded-content-citation",domProps:{innerHTML:e._s(e.content.citation)}}):e._e()])},bi=[],yi=l(wi,fi,bi,!1,null,null,null,null);const Ci=yi.exports,Ai=Object.freeze(Object.defineProperty({__proto__:null,default:Ci},Symbol.toStringTag,{value:"Module"}));const xi={name:"viewer-code",mixins:[v],components:{PrismEditor:st},methods:{highlighter(t){return X.highlight(t,X.languages[this.content.language.value])}}};var ki=function(){var e=this,i=e._self._c;return e.content.code?i("div",{staticClass:"viewer-code-component"},[i("div",{staticClass:"viewer-code-snippet"},[i("PrismEditor",{attrs:{highlight:e.highlighter,lineNumbers:"",readonly:""},model:{value:e.content.code,callback:function(s){e.$set(e.content,"code",s)},expression:"content.code"}})],1)]):e._e()},Si=[],Ti=l(xi,ki,Si,!1,null,null,null,null);const Di=Ti.exports,Ii=Object.freeze(Object.defineProperty({__proto__:null,default:Di},Symbol.toStringTag,{value:"Module"})),Y="working",Mi="awarded",J="submitted",Ei="/assets/collaboration-6b1898f7.svg";const Z=D.duration(5,"minutes").asSeconds(),z={Collaborate:"collab",Alone:"alone"},Vi={name:"viewer-collaboration",mixins:[v],data(){return{activityDetails:[],isSelected:null,isAnyTaskInWorking:null,isCollaborationPending:!1,SelectorOptions:z,componentLoading:{taskButton:null,continueButton:!1},matchFoundListener:null,timeoutInterval:null,timeoutSeconds:0,timerDasharray:null,STATUS_WORKING:Y,STATUS_SUBMITTED:J,STATUS_AWARDED:Mi,CollaborationArtwork:Ei}},computed:{..._({language:t=>t[r].language,activityId:t=>t[r].activityId,collaboratorInfo:t=>t[r].collaboratorInfo}),getOptions(){if(!this.isSelected)return[];const t=this.isSelected===z.Collaborate;return this.content.tasksData.map(({collaboration:i,taskId:s})=>{const n=this.activityDetails.find(a=>a.activityId===s);return!n||i!==t?null:{taskTitle:n.title,taskId:n.activityId,collaboration:i}}).filter(nt)},currentTaskTitle(){return this.getOptions.filter(t=>t.taskId===this.componentLoading.taskButton)[0].taskTitle},backButtonLabel(){return this.isSelected===z.Alone?this.$t("editor.collaboration.selector.action.go-back-collaborate"):this.isCollaborationPending?this.$t("editor.collaboration.selector.action.go-back-stay-alone"):this.$t("editor.collaboration.selector.action.go-back")},timerCircumference(){return Math.ceil(2*Math.PI*45)},timeoutText(){const t=D.duration(this.timeoutSeconds,"seconds").asMilliseconds();return D.utc(t).format("mm:ss")}},async created(){this.activityDetails=await this.fetchActivityDetails(),this.isAnyTaskInWorking=this.activityDetails.find(t=>t.status===Y)},methods:{...te(["loadActivity","sendActivitySubmission","scrollToComponent"]),selectContinuesation(t){this.isSelected=t},disableTaskButton(t){const e=this.activityDetails.find(i=>i.activityId===t.taskId);return(e==null?void 0:e.status)===J?!0:this.componentLoading.taskButton&&this.componentLoading.taskButton!==t.taskId},checkTaskStatus(t,e){return!!this.activityDetails.find(s=>s.activityId===t.taskId&&s.status===e)},async fetchActivityDetails(){const t=this.content.tasksData.map(s=>s.taskId),{language:e}=this;return this.previewMode?(await Ne()).map(({activityId:s,activityTitles:n})=>({title:n[e],activityId:s})):Ee(t,e)},async goBack(){this.isCollaborationPending&&(await this.unregisterListener(this.componentLoading.taskButton),this.componentLoading.taskButton=!1),this.isSelected=null},async selectTask(t){if(this.previewMode)return;const{collaboration:e,taskId:i}=t;if(this.componentLoading.taskButton=i,e){await this.registerListener(i);return}await this.transitionToTask(i)},async continueTask(){var i;if(!this.isAnyTaskInWorking)return;const{activityId:t}=this.isAnyTaskInWorking,e=(i=this.collaboratorInfo)==null?void 0:i.id;this.componentLoading.continueButton=!0,await this.transitionToTask(t,e)},async registerListener(t){this.startTimeout(),this.isCollaborationPending=!0,this.matchFoundListener=({userId:e,activityId:i})=>{this.transitionToTask(t,e,i)};try{f.on("MatchFound",this.matchFoundListener),await f.invoke("RequestCollaboration",{userId:L.userId,taskId:t,activityId:this.activityId})}catch{alert("Failed to request collaboration.")}},async unregisterListener(t){this.cancelTimeout();try{f.off("MatchFound",this.matchFoundListener),await f.invoke("CancelCollaboration",{userId:L.userId,taskId:t})}catch{alert("Failed to cancel collaboration request.")}this.matchFoundListener=null,this.isCollaborationPending=!1,this.componentLoading.taskButton=null},startTimeout(){this.timeoutSeconds=Z,this.timerDasharray=`${this.timerCircumference}`,this.timeoutInterval=setInterval(async()=>{this.timeoutSeconds-=1;const t=this.timeoutSeconds/Z*this.timerCircumference,e=Math.floor(t);this.timerDasharray=`${e} ${this.timerCircumference}`,this.timeoutSeconds===0&&(this.cancelTimeout(),await this.goBack())},D.duration(1,"seconds").asMilliseconds())},cancelTimeout(){clearInterval(this.timeoutInterval)},async transitionToTask(t,e=null,i=null){try{const{language:s,activityId:n}=this;await this.sendActivitySubmission(),await this.loadActivity({activityId:t,language:s,parentActivityId:n,collaboratorId:e,collaboratorActivityId:i}),await this.$nextTick(),document.querySelector("#viewer-content").scrollTo(0,0)}catch(s){console.error(s),alert("Collaboration component failed to transition.")}finally{this.cancelTimeout(),this.isCollaborationPending=!1,this.componentLoading.taskButton=null,this.componentLoading.continueButton=!1}}}};var Oi=function(){var e=this,i=e._self._c;return i("div",{staticClass:"viewer-collaboration"},[i("transition",{attrs:{mode:"out-in",name:"viewer-collaboration-fade"}},[e.isSelected?e.isCollaborationPending?i("section",{key:"viewer-collaboration-lobby",staticClass:"viewer-collaboration-section viewer-collaboration-lobby"},[i("div",{staticClass:"viewer-collaboration-section-title"},[i("h1",[e._v(" "+e._s(e.$t("editor.collaboration.pending.title"))+" ")]),i("p",[e._v(" "+e._s(e.$t("editor.collaboration.pending.subtitle"))+" ")]),i("p",{staticClass:"viewer-collaboration-section-title-subtitle-highlight"},[e._v(" "+e._s(e.currentTaskTitle)+" ")])]),i("div",{staticClass:"viewer-collaboration-lobby-timer"},[i("svg",{staticClass:"viewer-collaboration-lobby-timer-svg",attrs:{viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"}},[i("g",{staticClass:"viewer-collaboration-lobby-timer-circle"},[i("path",{staticClass:"viewer-collaboration-lobby-timer-path",attrs:{d:`
                            M 50, 50
                            m -45, 0
                            a 45,45 0 1,0 90,0
                            a 45,45 0 1,0 -90,0
                            `,"stroke-dasharray":e.timerDasharray}})])]),i("h2",{staticClass:"viewer-collaboration-lobby-timer-text"},[e._v(" "+e._s(e.timeoutText)+" ")])]),i("div",{staticClass:"viewer-collaboration-section-back-button"},[i("v-btn",{attrs:{text:""},on:{click:function(s){return e.goBack()}}},[e._v(" "+e._s(e.backButtonLabel)+" ")])],1)]):i("section",{key:"viewer-collaboration-selector",staticClass:"viewer-collaboration-section viewer-collaboration-selector"},[i("div",{staticClass:"viewer-collaboration-section-title"},[i("h1",[e._v(" "+e._s(e.$t("editor.collaboration.selector.title"))+" ")])]),i("div",{staticClass:"viewer-collaboration-selector-options d-flex flex-row flex-wrap justify-center"},e._l(e.getOptions,function(s,n){return i("div",{key:s.taskId+n,staticClass:"d-flex align-center"},[e.checkTaskStatus(s,e.STATUS_SUBMITTED)?i("v-chip",{staticClass:"ma-2",attrs:{color:"#5F93CC",dark:"",label:"",large:""}},[i("div",{staticClass:"px-3 d-flex align-center"},[i("v-icon",{attrs:{left:""}},[e._v(" hourglass_bottom ")]),e._v(" "+e._s(s.taskTitle)+" ")],1)]):e.checkTaskStatus(s,e.STATUS_AWARDED)?i("v-chip",{staticClass:"ma-2",attrs:{color:"#4CAF50",dark:"",label:"",large:""}},[i("div",{staticClass:"px-3 d-flex align-center"},[i("v-icon",{attrs:{left:""}},[e._v(" star ")]),e._v(" "+e._s(s.taskTitle)+" ")],1)]):i("v-btn",{staticClass:"viewer-collaboration-selector-options-button white--text",attrs:{color:"#5F93CC",disabled:e.disableTaskButton(s),large:"",loading:e.componentLoading.taskButton===s.taskId},on:{click:function(a){return e.selectTask(s)}}},[e._v(" "+e._s(s.taskTitle)+" ")])],1)}),0),i("div",{staticClass:"viewer-collaboration-section-back-button"},[i("v-btn",{attrs:{text:""},on:{click:function(s){return e.goBack()}}},[e._v(" "+e._s(e.backButtonLabel)+" ")])],1)]):i("section",{key:"viewer-collaboration-intro",staticClass:"viewer-collaboration-section viewer-collaboration-intro"},[i("div",{staticClass:"viewer-collaboration-section-artwork"},[i("img",{attrs:{alt:"Collaborate",src:e.CollaborationArtwork,title:"Artwork"}})]),i("div",{staticClass:"viewer-collaboration-section-title"},[i("h1",[e._v(" "+e._s(e.$t("editor.collaboration.intro.title"))+" ")])]),e.isAnyTaskInWorking?i("div",{staticClass:"viewer-collaboration-intro-selector"},[i("div",{staticClass:"viewer-collaboration-intro-selector-button-continue"},[i("v-btn",{staticClass:"white--text",attrs:{color:"#4CAF50",large:"",loading:e.componentLoading.continueButton},on:{click:function(s){return e.continueTask()}}},[e._v(" "+e._s(e.$t("editor.collaboration.intro.action.continue"))+" ")])],1)]):i("div",{staticClass:"viewer-collaboration-intro-selector"},[i("div",{staticClass:"viewer-collaboration-intro-selector-button-large"},[i("v-btn",{staticClass:"white--text",attrs:{color:"#4CAF50",large:""},on:{click:function(s){return e.selectContinuesation(e.SelectorOptions.Collaborate)}}},[e._v(" "+e._s(e.$t("editor.collaboration.intro.action.collaborate"))+" ")])],1),i("div",{staticClass:"viewer-collaboration-intro-selector-button-small d-flex justify-center"},[i("v-btn",{attrs:{small:"",text:""},on:{click:function(s){return e.selectContinuesation(e.SelectorOptions.Alone)}}},[e._v(" "+e._s(e.$t("editor.collaboration.intro.action.stay-alone"))+" ")])],1)])])])],1)},$i=[],Ri=l(Vi,Oi,$i,!1,null,null,null,null);const Fi=Ri.exports,zi=Object.freeze(Object.defineProperty({__proto__:null,default:Fi},Symbol.toStringTag,{value:"Module"})),x={computed:{..._({componentAnswer(t){return t[r].componentAnswers[this.id]}}),answers(){var t;return(t=this.componentAnswer)==null?void 0:t.answerData},status:{get(){return this.componentAnswer.status},set(t){this.componentAnswer.status=t}}},created(){this.$store.dispatch("registerComponent",{componentId:this.$options.propsData.id,componentType:this.$options.propsData.type,content:this.$options.propsData.content,defaultAnswers:this.$options.answers})}};const Pi={name:"viewer-component-files",mixins:[v,x],components:{TFileList:O},data(){return{allSupportedExtensions:u.allSupportedExtensions,creationServiceType:h}}};var Bi=function(){var e=this,i=e._self._c;return i("div",{staticClass:"viewer-component-files"},[i("div",{staticClass:"viewer-files-body"},[i("div",[i("TFileList",{attrs:{edit:!1,files:e.content.attachments,serviceType:e.creationServiceType,showToggle:!1,view:!0,viewerMode:""}})],1)])])},ji=[],Li=l(Pi,Bi,ji,!1,null,null,null,null);const Ui=Li.exports,qi=Object.freeze(Object.defineProperty({__proto__:null,default:Ui},Symbol.toStringTag,{value:"Module"}));const Ni={name:"viewer-html",mixins:[v],mounted(){this.$nextTick(()=>{new Function(this.content.jsCode)()})},computed:{linkifiedAnswerTextSafeHTML(){return E(V(this.content.citation))}}};var Wi=function(){var e=this,i=e._self._c;return i("div",{staticClass:"viewer-html-component"},[i("div",{staticClass:"viewer-html-snippet"},[i("div",{staticClass:"viewer-html-content",domProps:{innerHTML:e._s(e.content.htmlCode)}})]),i("div",{staticClass:"viewer-loaded-content"},[e.content.citation?i("p",{staticClass:"viewer-loaded-content-citation",domProps:{innerHTML:e._s(e.linkifiedAnswerTextSafeHTML)}}):e._e()])])},Gi=[],Qi=l(Ni,Wi,Gi,!1,null,null,null,null);const Hi=Qi.exports,Xi=Object.freeze(Object.defineProperty({__proto__:null,default:Hi},Symbol.toStringTag,{value:"Module"})),Yi="/assets/noImage-dfd6babc.svg";const Ji={name:"viewer-image-component",mixins:[v],components:{VueEasyLightbox:$},data(){return{noImage:Yi,visible:!1,index:0,serviceType:h}},methods:{composeFileUrl:m,show(){document.scrollingElement.style.overflow="hidden",this.visible=!0},hide(){document.scrollingElement.style.overflow="auto",this.visible=!1}},computed:{showImage(){return this.content.url!==""},isBlobUrl(){return!re(this.content.url)},src(){return this.isBlobUrl?m(this.content.url,this.serviceType):this.content.url},linkifiedAnswerTextSafeHTML(){return E(V(this.content.citation))},viewerImageClass(){return this.content.lightboxEnabled?"viewer-image-zoom-in":"viewer-image-no-zoom"}}};var Zi=function(){var e=this,i=e._self._c;return i("div",{staticClass:"viewer-image-component"},[i("div",{staticClass:"viewer-image-loaded-container"},[i("div",{staticClass:"viewer-image-loaded-content"},[e.showImage?i("img",{class:e.viewerImageClass,style:{width:e.content.imageSize+"%"},attrs:{loading:"lazy",src:e.src},on:{click:e.show}}):e._e()]),e.content.lightboxEnabled?i("div",{staticClass:"viewer-image-lightbox"},[i("VueEasyLightbox",{attrs:{imgs:e.src,index:e.index,visible:e.visible},on:{hide:e.hide}})],1):e._e()]),e.content.citation?i("div",{staticClass:"viewer-image-citation-container",style:{width:e.content.imageSize+"%"}},[i("p",{staticClass:"viewer-loaded-content-citation",domProps:{innerHTML:e._s(e.content.citation)}})]):e._e(),e.content.caption?i("p",{staticClass:"viewer-image-caption",style:{width:e.content.imageSize+"%"}},[e._v(" "+e._s(e.content.caption)+" ")]):e._e()])},Ki=[],es=l(Ji,Zi,Ki,!1,null,null,null,null);const ts=es.exports,is=Object.freeze(Object.defineProperty({__proto__:null,default:ts},Symbol.toStringTag,{value:"Module"}));const ss={name:"viewer-image-gallery",mixins:[v],components:{VueEasyLightbox:$},data(){return{visible:!1,index:0,lightboxData:[],serviceType:h}},methods:{getFileUrl(t){return t.isUpload?m(t.url,this.serviceType):t.url},getLightboxData(t){this.lightboxData=[];for(const e in t)this.lightboxData.push(t[e].isUpload?m(t[e].url,this.serviceType):t[e].url)},show(){document.scrollingElement.style.overflow="hidden",this.visible=!0},hide(){document.scrollingElement.style.overflow="auto",this.visible=!1}},computed:{activeImage(){return this.content.files[this.index]}},mounted(){this.getLightboxData(this.content.files)}};var ns=function(){var e=this,i=e._self._c;return i("div",{staticClass:"viewer-image-gallery-component"},[i("p",{staticClass:"viewer-image-gallery-title"},[e._v(" "+e._s(e.activeImage.title)+" ")]),i("v-carousel",{staticClass:"viewer-image-gallery-slide",attrs:{"hide-delimiters":""},model:{value:e.index,callback:function(s){e.index=s},expression:"index"}},e._l(e.content.files,function(s,n){return i("v-carousel-item",{key:n,attrs:{"active-class":"viewer-image-gallery-image",src:e.getFileUrl(s)},on:{click:e.show}})}),1),i("div",{staticClass:"viewer-image-citation-container"},[i("p",{staticClass:"viewer-loaded-content-citation",domProps:{innerHTML:e._s(e.activeImage.citation)}})]),i("p",{staticClass:"viewer-image-gallery-description"},[e._v(" "+e._s(e.activeImage.description)+" ")]),i("VueEasyLightbox",{attrs:{imgs:e.lightboxData,index:e.index,visible:e.visible},on:{hide:e.hide}})],1)},as=[],os=l(ss,ns,as,!1,null,null,null,null);const rs=os.exports,ls=Object.freeze(Object.defineProperty({__proto__:null,default:rs},Symbol.toStringTag,{value:"Module"})),cs="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAYCAYAAAC8/X7cAAAAAXNSR0IArs4c6QAAAnpJREFUWAnVV81O20AQ3nESErUHIpQcORSpKKiXgNQ7D5BcKiquPfXKI7Q8Apc+AKKX0nIhD8Cth0qUC0qgEjxAXBQqtY0b4u2Mwdba2T87OIhcvN795ptvMp/Xa8Ye+Q+m1c8v1ytX3nXL53yu1qh+Aji60XFyvl50z35tOox7C+X5Djw7GurwpjXHBNCtX52vtVxvcIri9xH30e1d7+rwtBZguL9HMRRLHKYY3XqmDgzOXy6NxqMdJI4nB+bVGycVXcJ+rzlknJUTmE6pUNqqLn+7SMwbb1N1gOzy86z5buTfnCJzXDylmhQ2KUCOaREncVOOySD1jHUBkV189p5xniqJOr2wgpw+cqe1lbEAsku/2zwcj/1D/IeXhJT5DDEH5aKclNuURFmA0S4m5unXrWwlLSB3u9gWZ2GrWAEzt4t1IWpbRQW43bU3yt3FNlH+uMBWpDVMFRRAfufAP+Syu4SZ7uuKtiKt4XZ724Gil+mFdl+aMvHcaQ4KgMWvf4HBWwYw1bkkk5C0QaiRtJJmCo2egVrjeK/kFF/gXCct5wzxHdJIWsOcxXBA17uzSJu20bHv78zkxSUKUI2BXRQcZ2th+Xjiz406IMYSsFauYjec7Qe1VWBpZ5u0yMSTZuPDqzx5ihUL4/rKiZYTjwhcgOuGVifUmIVkbDO3lcYuMn1SC8mAudvKwi4yXdp2ywJoTm0r+FNf+f5UFUfz/e7qb/xweJLAWNklERPcWndADCZbodfbhYLTxqco+ooCYF9EnGwcw5BdkIO4snyNEX+mDojC6JXuDgevaK7WeP4ZYP+fuJ4cc/56zu392AjwlerBtB/1Sf5Hd/8fYis7A3VY7ckAAAAASUVORK5CYII=";const ds={name:"viewer-interactive-gallery",mixins:[v],data(){return{dragIcon:cs,width:745,animate:!0,dragging:!1,serviceType:h}},computed:{visibleDescription(){return this.content.files[385>this.width|0].description}},methods:{getFileUrl(t){return`url(${t.isUpload?m(t.url,this.serviceType):t.url})`},mouseEntered(){this.animate=!1,this.width=this.$refs.resizeableImage.clientWidth},setDraggingState(t){this.dragging=t},drag(t){this.dragging&&(this.width=t.offsetX)},doFilesHaveProp(t){var e,i;return((e=this.content.files[0])==null?void 0:e[t])&&((i=this.content.files[1])==null?void 0:i[t])}}};var us=function(){var e=this,i=e._self._c;return i("div",{staticClass:"viewer-interactive-gallery-component",style:{cursor:this.dragging?"pointer":"inherit"},on:{mouseleave:function(s){return e.setDraggingState(!1)},mouseup:function(s){return e.setDraggingState(!1)}}},[e.doFilesHaveProp("url")?i("div",{staticClass:"viewer-image-border"},[i("div",{staticClass:"viewer-inset-shadow"}),i("div",{staticClass:"viewer-images-container",on:{mouseenter:e.mouseEntered,mousemove:e.drag}},[i("div",{ref:"resizeableImage",staticClass:"viewer-resizeable-image",class:{animate:e.animate},style:{backgroundImage:e.getFileUrl(e.content.files[0]),width:`${e.width}px`}},[i("div",{staticClass:"viewer-drag-circle",style:{pointerEvents:this.dragging?"none":"all"},on:{mousedown:function(s){return e.setDraggingState(!0)}}},[i("div",[i("img",{attrs:{src:e.dragIcon}})])])]),i("div",{staticClass:"viewer-image",style:{backgroundImage:e.getFileUrl(e.content.files[1])}})])]):e._e(),e.doFilesHaveProp("description")?i("div",{staticClass:"viewer-description-container"},[i("p",[e._v(e._s(e.visibleDescription))])]):e._e()])},vs=[],ps=l(ds,us,vs,!1,null,null,null,null);const ms=ps.exports,_s=Object.freeze(Object.defineProperty({__proto__:null,default:ms},Symbol.toStringTag,{value:"Module"})),q={props:{content:{type:Object,default:()=>({})}}};const hs={name:"viewer-multimedia-quiz-audio-component",mixins:[q],components:{AudioPlayerMotion:Xe},data(){return{isAudioPaused:!0,audioFrontWave:Ye,audioBackWave:Je,serviceType:h}},methods:{composeFileUrl:m,audioPaused(t){this.isAudioPaused=t}},computed:{fileType(){return`audio/${this.content.fileType}`},fileUrl(){return m(this.content.audioUrl,this.serviceType)}}};var gs=function(){var e=this,i=e._self._c;return i("div",{staticClass:"viewer-multimedia-quiz-audio-component"},[i("div",{staticClass:"viewer-multimedia-quiz-audio-component-container"},[e.content.audioUrl?i("div",{staticClass:"viewer-multimedia-quiz-audio-component-player-container"},[i("AudioPlayerMotion",{staticClass:"viewer-multimedia-quiz-audio-player-audio",attrs:{src:e.fileUrl,type:e.fileType},on:{audioPaused:e.audioPaused}})],1):e._e(),e.content.soundCloudEmbed?i("div",{staticClass:"viewer-multimedia-quiz-audio-embed-container",domProps:{innerHTML:e._s(e.content.soundCloudEmbed)}}):e._e(),i("div",{staticClass:"viewer-multimedia-quiz-audio-component-caption-container"},[e.content.caption?i("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:s}){return[i("p",e._g({staticClass:"viewer-multimedia-quiz-audio-caption"},s),[e._v(" "+e._s(e.content.caption)+" ")])]}}],null,!1,2885030078)},[e._v(" "+e._s(e.content.caption)+" ")]):e._e()],1)])])},ws=[],fs=l(hs,gs,ws,!1,null,null,null,null);const fe=fs.exports,bs=Object.freeze(Object.defineProperty({__proto__:null,default:fe},Symbol.toStringTag,{value:"Module"}));const ys={name:"viewer-multimedia-quiz-image-component",mixins:[q],components:{VueEasyLightbox:$},data(){return{visible:!1,index:0,serviceType:h}},methods:{show(){document.scrollingElement.style.overflow="hidden",this.visible=!0},hide(){document.scrollingElement.style.overflow="auto",this.visible=!1}},computed:{showImage(){return this.content.url!==""},isBlobUrl(){return!re(this.content.url)},src(){return this.isBlobUrl?m(this.content.url,this.serviceType):this.content.url}}};var Cs=function(){var e=this,i=e._self._c;return i("div",{staticClass:"viewer-multimedia-quiz-image-component"},[i("div",{staticClass:"viewer-multimedia-quiz-image-loaded-container"},[i("div",{staticClass:"viewer-multimedia-quiz-image-loaded-content"},[e.showImage?i("img",{staticClass:"viewer-multimedia-quiz-image-img",attrs:{loading:"lazy",src:e.src},on:{click:e.show}}):e._e()]),i("div",{staticClass:"viewer-multimedia-quiz-image-lightbox"},[i("VueEasyLightbox",{attrs:{imgs:e.src,index:e.index,visible:e.visible},on:{hide:e.hide}})],1)]),i("div",{staticClass:"viewer-multimedia-quiz-image-component-caption-container"},[e.content.caption?i("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:s}){return[i("p",e._g({staticClass:"viewer-multimedia-quiz-image-caption"},s),[e._v(" "+e._s(e.content.caption)+" ")])]}}],null,!1,3891653103)},[e._v(" "+e._s(e.content.caption)+" ")]):e._e()],1)])},As=[],xs=l(ys,Cs,As,!1,null,null,null,null);const be=xs.exports,ks=Object.freeze(Object.defineProperty({__proto__:null,default:be},Symbol.toStringTag,{value:"Module"}));const Ss={name:"viewer-multimedia-quiz-video-component",data(){return{serviceType:h}},mixins:[q,le],components:{VideoPlayer:ce,StreamPlayer:de,VimeoPlayer:ue,YoutubePlayer:ve}};var Ts=function(){var e=this,i=e._self._c;return i("div",{staticClass:"viewer-multimedia-quiz-video-component"},[e.content.videoSRC?i("div",{staticClass:"viewer-multimedia-quiz-video-component-container"},[e.isSrc?i("VideoPlayer",{attrs:{serviceType:e.serviceType,src:e.content.videoSRC}}):e.isYoutube?i("YoutubePlayer",{attrs:{src:e.content.videoSRC}}):e.isVimeo?i("VimeoPlayer",{attrs:{src:e.content.videoSRC}}):e.isTUMO?i("StreamPlayer",{attrs:{src:e.content.videoSRC}}):e._e()],1):e._e(),i("div",{staticClass:"viewer-multimedia-quiz-video-component-caption-container"},[e.content.caption?i("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:s}){return[i("p",e._g({staticClass:"viewer-multimedia-quiz-video-caption"},s),[e._v(" "+e._s(e.content.caption)+" ")])]}}],null,!1,1753443577)},[e._v(" "+e._s(e.content.caption)+" ")]):e._e()],1)])},Ds=[],Is=l(Ss,Ts,Ds,!1,null,null,null,null);const ye=Is.exports,Ms=Object.freeze(Object.defineProperty({__proto__:null,default:ye},Symbol.toStringTag,{value:"Module"}));const Es={name:"transition-expand",functional:!0,props:{name:{type:String,default:"expand"}},render(t,e){const i={props:{name:e.props.name},on:{afterEnter(s){s.style.height="auto"},enter(s){const{width:n}=getComputedStyle(s);s.style.width=n,s.style.position="absolute",s.style.visibility="hidden",s.style.height="auto";const{height:a}=getComputedStyle(s);s.style.width=null,s.style.position=null,s.style.visibility=null,s.style.height=0,getComputedStyle(s).height,setTimeout(()=>{s.style.height=a})},leave(s){const{height:n}=getComputedStyle(s);s.style.height=n,getComputedStyle(s).height,setTimeout(()=>{s.style.height=0})}}};return t("transition",i,e.children)}},Vs=null,Os=null;var $s=l(Es,Vs,Os,!1,null,"04e7472c",null,null);const Ce=$s.exports;function Ae(t){if(!Array.isArray(t))throw new TypeError(`Expected an array, got ${typeof t}`);t=[...t];for(let e=t.length-1;e>0;e--){const i=Math.floor(Math.random()*(e+1));[t[e],t[i]]=[t[i],t[e]]}return t}const Rs={name:"viewer-multimedia-quiz",mixins:[v,x],components:{TransitionExpand:Ce,ViewerMultimediaQuizAudio:fe,ViewerMultimediaQuizImage:be,ViewerMultimediaQuizVideo:ye},data(){return{loading:!1,loaderHeight:5}},answers:{selectedOptionId:null,wrongAnswers:[]},created(){!this.content.autoExamine&&this.isOptionSelected&&this.status===o.REJECTED&&(this.answers.wrongAnswers.includes(this.answers.selectedOptionId)||this.answers.wrongAnswers.push(this.answers.selectedOptionId),this.answers.selectedOptionId=null),this.isOptionSelected&&(this.options.find(e=>e.id===this.answers.selectedOptionId)||(this.answers.selectedOptionId=null,this.status=o.PENDING))},methods:{async selectOption(t){if(!(this.readOnly||this.status===o.AWARDED||this.answers.selectedOptionId===t.id||this.loading)){if(this.answers.selectedOptionId=t.id,this.loading=!0,await I(u.viewerQuizLoaderDelay),this.loading=!1,this.content.autoExamine){this.status=t.correct?o.AWARDED:o.REJECTED;return}this.status=o.PENDING}},disableOption(t){return t===this.answers.selectedOptionId?!0:!(this.status!==o.AWARDED&&this.answers.wrongAnswers.includes(t)||this.status===o.AWARDED)},getComponentName(t){return"ViewerMultimediaQuiz"+pe(t)},getOptionCheckboxValue(t){return t===this.answers.selectedOptionId},getOptionCheckboxOpacitiy(t){if(t===this.answers.selectedOptionId)return"viewer-multimedia-quiz-option-checkbox-container-opacity"},highlightedOptionColor(t){const e={color:"",backgroundColor:""};return this.status===o.AWARDED&&t.correct&&(e.color="#8CC541",e.backgroundColor="#F1F8E9"),e}},computed:{..._({activityStatus:t=>t[r].status}),options(){return this.content.randomizeOrder?Ae(this.content.options):this.content.options},feedback(){if(!this.isOptionSelected)return"";if(this.content.autoExamine){for(const t of this.options)if(this.answers.selectedOptionId===t.id)return t.feedback}return this.$t("activity.saved")},feedbackVisible(){return this.loading||!this.content.autoExamine&&this.isOptionSelected&&this.status===o.AWARDED?!1:this.isOptionSelected},isOptionSelected(){return this.answers.selectedOptionId!==null},readOnly(){return this.previewMode&&(this.activityStatus===o.AWARDED||this.activityStatus===o.PENDING)}}};var Fs=function(){var e=this,i=e._self._c;return e.content.question?i("div",e._b({staticClass:"viewer-component-multimedia-quiz"},"div",{[e.status]:e.status},!1),[i("div",{staticClass:"viewer-multimedia-quiz-header"},[i("div",{staticClass:"viewer-multimedia-quiz-question-container"},[e.content.optional?i("p",{staticClass:"viewer-multimedia-quiz-optional-question-text"},[e._v(" "+e._s(e.$t("common-optional-question"))+" ")]):e._e(),i("p",{staticClass:"viewer-multimedia-quiz-question"},[e._v(" "+e._s(e.content.question)+" ")])])]),e.loading?i("v-progress-linear",{staticClass:"viewer-multimedia-quiz-loader",attrs:{color:"#4e86c6",height:e.loaderHeight,indeterminate:""}}):e._e(),i("div",{staticClass:"viewer-multimedia-quiz-options"},e._l(e.options,function(s,n){return i("div",{key:s.id,staticClass:"viewer-multimedia-quiz-option"},[i("v-card",{staticClass:"viewer-multimedia-quiz-option-card",attrs:{color:e.highlightedOptionColor(s).backgroundColor}},[i("div",{staticClass:"viewer-multimedia-quiz-option-component"},[i("div",{staticClass:"viewer-multimedia-quiz-option-header"},[i("p",{staticClass:"viewer-multimedia-quiz-option-index"},[e._v(e._s(n+1))]),e.disableOption(s.id)?i("div",{staticClass:"viewer-multimedia-quiz-option-checkbox-container",class:e.getOptionCheckboxOpacitiy(s.id)},[i("span",{staticClass:"viewer-multimedia-quiz-option-checkbox-label"},[e._v(" "+e._s(e.$t("common.select"))+" ")]),i("v-checkbox",{staticClass:"viewer-multimedia-quiz-option-checkbox",attrs:{color:e.highlightedOptionColor(s).color,"hide-details":"","input-value":e.getOptionCheckboxValue(s.id)},on:{click:function(a){return e.selectOption(s)}}})],1):e._e()]),i("div",{staticClass:"viewer-multimedia-quiz-option-component-container"},[i(e.getComponentName(s.componentType),{tag:"component",attrs:{content:s.content}})],1)])])],1)}),0),i("TransitionExpand",{attrs:{name:"feedback-expand-transition"}},[e.feedbackVisible?i("div",{staticClass:"viewer-multimedia-quiz-feedback-wrapper"},[i("div",{staticClass:"viewer-multimedia-quiz-feedback"},[e._v(" "+e._s(e.feedback)+" ")])]):e._e()])],1):e._e()},zs=[],Ps=l(Rs,Fs,zs,!1,null,null,null,null);const Bs=Ps.exports,js=Object.freeze(Object.defineProperty({__proto__:null,default:Bs},Symbol.toStringTag,{value:"Module"}));const Ls={name:"viewer-plugin-component",mixins:[v,x],data(){return{iframeHeight:0,serviceType:U}},answers:{pluginAnswers:()=>[]},created(){window.addEventListener("message",this.handleMessage)},beforeDestroy(){window.removeEventListener("message",this.handleMessage)},methods:{postMessage(t,e){this.pluginWindow.postMessage({application:"activity-manager",message:t,data:e},"*")},async handleMessage(t){if(Ze(t)&&this.pluginWindow===t.source)switch(t.data.message){case"init":this.postMessage("init-response",{id:this.id,activityId:this.$store.state.viewer.activityId,studentId:L.userId,collaboratorId:this.collaboratorInfo.id,collaboratorActivityId:this.collaboratorInfo.collaboratorActivityId,content:this.content.pluginContent,answers:this.answers.pluginAnswers,language:this.$i18n.locale,status:this.status,examinable:this.answers.examinable,finished:this.answers.finished});break;case"capture-error":se("plugin.url",this.iframeUrl),Ve(t.data.data.error);break;case"set-answers":S.isEmpty(S.xorWith(this.answers.pluginAnswers,t.data.data.answers,S.isEqual))||(this.answers.pluginAnswers=t.data.data.answers,this.status=o.PENDING);break;case"set-examinable":this.answers.examinable=t.data.data.examinable;break;case"set-finished":this.answers.finished=t.data.data.finished;break;case"set-iframe-height":this.iframeHeight=t.data.data.iframeHeight;break;case"set-activity-scroll-frozen":this.$store.commit("setScrollingDisabled",t.data.data.activityScrollFrozen);break;case"upload-file":const{id:e,file:i}=t.data.data,s=oe({file:i,tags:this.getFileTags()}),n=await ie({data:s,serviceType:this.serviceType});this.postMessage("upload-file-response",{id:e,url:n});break}},getFileTags(){return[{key:"Source",value:"Activity"},{key:"Id",value:this.$store.state.viewer.activityId},{key:"Attachment",value:"Submission"},{key:"Skill",value:this.$store.state.viewer.skill}]}},computed:{..._({collaboratorInfo:t=>t[r].collaboratorInfo}),iframeUrl(){return Ke(this.content.pluginUrl)},pluginWindow(){return this.$refs.pluginFrame.contentWindow}}};var Us=function(){var e=this,i=e._self._c;return i("div",{staticClass:"viewer-plugin-component"},[e.iframeUrl?i("iframe",{ref:"pluginFrame",staticClass:"viewer-plugin-component-iframe",attrs:{allow:"geolocation; microphone; camera; display-capture",allowfullscreen:"",height:e.iframeHeight,src:e.iframeUrl}}):e._e()])},qs=[],Ns=l(Ls,Us,qs,!1,null,null,null,null);const Ws=Ns.exports,Gs=Object.freeze(Object.defineProperty({__proto__:null,default:Ws},Symbol.toStringTag,{value:"Module"}));const Qs={name:"viewer-component-quiz",mixins:[v,x],components:{TransitionExpand:Ce},answers:{selectedOptionId:null,wrongAnswers:[]},data(){return{loading:!1,loaderHeight:5}},created(){!this.content.autoExamine&&this.isOptionSelected&&this.status===o.REJECTED&&(this.answers.wrongAnswers.includes(this.answers.selectedOptionId)||this.answers.wrongAnswers.push(this.answers.selectedOptionId),this.answers.selectedOptionId=null),this.isOptionSelected&&(this.options.find(e=>e.id===this.answers.selectedOptionId)||(this.answers.selectedOptionId=null,this.status=o.PENDING))},methods:{async selectOption(t){if(!(this.readOnly||this.status===o.AWARDED||this.answers.selectedOptionId===t.id||this.loading)){if(this.answers.selectedOptionId=t.id,this.loading=!0,await I(u.viewerQuizLoaderDelay),this.loading=!1,this.content.autoExamine){this.status=t.correct?o.AWARDED:o.REJECTED;return}this.status=o.PENDING}},highlightOption(t){if(t===this.answers.selectedOptionId)return"viewer-quiz-option-selected"},highlightCorrectOption(t){if(this.status===o.AWARDED&&t.correct)return"viewer-quiz-option-awarded"},disableOption(t){if(this.status!==o.AWARDED&&this.answers.wrongAnswers.includes(t))return"viewer-quiz-option-disabled"}},computed:{..._({activityStatus:t=>t[r].status}),options(){return this.content.randomizeOrder?Ae(this.content.options):this.content.options},feedback(){if(!this.isOptionSelected)return"";if(this.content.autoExamine){for(const t of this.options)if(this.answers.selectedOptionId===t.id)return t.feedback}return this.$t("activity.saved")},feedbackVisible(){return this.loading||!this.content.autoExamine&&this.isOptionSelected&&this.status===o.AWARDED?!1:this.isOptionSelected},isOptionSelected(){return this.answers.selectedOptionId!==null},readOnly(){return this.previewMode&&(this.activityStatus===o.AWARDED||this.activityStatus===o.PENDING)}}};var Hs=function(){var e=this,i=e._self._c;return e.content.question?i("div",e._b({staticClass:"viewer-component-quiz"},"div",{[e.status]:e.status},!1),[i("div",{staticClass:"viewer-quiz-header"},[i("div",{staticClass:"viewer-quiz-question-container"},[e.content.optional?i("p",{staticClass:"viewer-quiz-optional-question-text"},[e._v(" "+e._s(e.$t("common-optional-question"))+" ")]):e._e(),i("p",{staticClass:"viewer-quiz-question"},[e._v(" "+e._s(e.content.question)+" ")])])]),e.loading?i("v-progress-linear",{staticClass:"viewer-quiz-loader",attrs:{color:"#4e86c6",height:e.loaderHeight,indeterminate:""}}):e._e(),i("div",{staticClass:"viewer-quiz-options"},e._l(e.options,function(s,n){return i("div",{key:s.id,staticClass:"viewer-quiz-option",class:[e.highlightOption(s.id),e.highlightCorrectOption(s),e.disableOption(s.id)],on:{click:function(a){return e.selectOption(s)}}},[i("span",{staticClass:"viewer-quiz-option-index"},[e._v(e._s(n+1))]),i("p",{staticClass:"viewer-quiz-option-text"},[e._v(e._s(s.text))])])}),0),i("TransitionExpand",{attrs:{name:"feedback-expand-transition"}},[e.feedbackVisible?i("div",{staticClass:"viewer-quiz-feedback-wrapper"},[i("div",{staticClass:"viewer-quiz-feedback"},[e._v(" "+e._s(e.feedback)+" ")])]):e._e()])],1):e._e()},Xs=[],Ys=l(Qs,Hs,Xs,!1,null,null,null,null);const Js=Ys.exports,Zs=Object.freeze(Object.defineProperty({__proto__:null,default:Js},Symbol.toStringTag,{value:"Module"})),Ks={computed:{..._({componentAnswerMetaData(t){return t[r].componentAnswersMetaData[this.id]},submissionId:t=>t[r].submissionId}),answersMetaData(){var t;return(t=this.componentAnswerMetaData)==null?void 0:t.answerMetaData}},created(){this.$store.dispatch("registerMetaDataComponent",{componentId:this.$options.propsData.id,componentType:this.$options.propsData.type,content:this.$options.propsData.content,defaultAnswerMetaData:this.$options.answersMetaData})}};const en={name:"viewer-slot-machine-component",mixins:[v,Ks,me,at],components:{TLightbox:_e,TVideoPlayer:he},answersMetaData:{slotMachinMetaData:[],slotType:null,spinsRemaining:1/0},data(){return{slotLoading:!1,serviceType:h,showedVideosIndexesMap:{},videoSlotsShowedIndexesMap:0}},mounted(){const t=!!this.answersMetaData.slotMachinMetaData.length;this.isVideo&&(t?this.slotDataContent.forEach((e,i)=>{e.forEach(({hash:s},n)=>{var c;const a=s===((c=this.answersMetaData.slotMachinMetaData[i])==null?void 0:c.hash);this.setVideosIndexes(i,a?n:0)})}):this.slotDataContent.forEach((e,i)=>{this.setVideosIndexes(i,0)})),t||this.slotStart(),this.isImage&&this.answersMetaData.slotMachinMetaData&&this.setLightboxData(this.answersMetaData.slotMachinMetaData,this.serviceType),this.answersMetaData.type=this.slotType,this.handleRemainSpinCount()},methods:{setVideosIndexes(t,e){this.showedVideosIndexesMap={...this.showedVideosIndexesMap,[t]:e}},handleRemainSpinCount(){this.content.spinsCount&&(this.zeroSpinsRemaining||(!this.answersMetaData.spinsRemaining||this.answersMetaData.spinsRemaining===1/0)&&(this.answersMetaData.spinsRemaining=this.content.spinsCount))},decrementSpinsCount(){this.zeroSpinsRemaining||typeof this.answersMetaData.spinsRemaining!="number"||(this.answersMetaData.spinsRemaining=this.answersMetaData.spinsRemaining-1,this.answersMetaData.lastSubmissionId=this.submissionId)},getSlotElement(t){if(this.isVideo)return null;const{viewerSlotMachineText:e,viewerSlotMachineImage:i}=this.$refs;return this.isText?e[t]:i[t]},slotStart(){this.slotLoading=!0,this.answersMetaData&&(this.answersMetaData.slotMachinMetaData=[],this.decrementSpinsCount()),this.slotDataContent.forEach((t,e)=>{const i=this.getSlotElement(e),s=setInterval(this.spinSlot,200,i,t,e),a=!!Math.round(Math.random())?3200:1600;setTimeout(()=>{this.stopSlotItem(s,i,t,e)},a)})},getSlotRandomValue(t){const e=Math.random()*t.length|0;return{randomValue:t[e],randomIndex:e}},fillSlot(t,e,i,s){this.isText?t.innerHTML=e:this.isImage?t.src=e.isUpload?m(e.url,this.serviceType):e.url:this.isVideo&&this.setVideosIndexes(i,s)},spinSlot(t,e,i){const{randomValue:s,randomIndex:n}=this.getSlotRandomValue(e);this.fillSlot(t,s,i,n)},stopSlotItem(t,e,i,s){clearInterval(t);const{randomValue:n,randomIndex:a}=this.getSlotRandomValue(i);this.fillSlot(e,n,s,a),this.answersMetaData.slotMachinMetaData[s]=n,this.slotLoading=!1,this.setLightboxData(this.answersMetaData.slotMachinMetaData,this.serviceType)},getSlotImage(t){const e=this.answersMetaData.slotMachinMetaData[t];if(e)return e.isUpload?m(e.url,this.serviceType):e.url},openImagePreview(t){this.slotLoading||this.openLightbox(t),document.scrollingElement.style.overflow="hidden"},closeImagePreview(){this.closeLightbox(),document.scrollingElement.style.overflow="auto"}},computed:{spinsRemainClasses(){return["viewer-slot-machine-component-spins",this.zeroSpinsRemaining&&"viewer-slot-machine-component-spins-alert"]},titleClass(){return this.isText?"viewer-slot-machine-item-title-text":"viewer-slot-machine-item-title-image"},slotDataContent(){return this.content.slotData.content},showSpinsCount(){return typeof this.answersMetaData.spinsRemaining=="number"&&this.answersMetaData.spinsRemaining!==1/0},isDisabledSpinButton(){return this.slotLoading||this.zeroSpinsRemaining},zeroSpinsRemaining(){return this.answersMetaData.spinsRemaining===0}}};var tn=function(){var e=this,i=e._self._c;return i("div",{staticClass:"viewer-slot-machine-component"},[i("div",{staticClass:"viewer-slot-machine-component-items"},e._l(e.slotDataContent,function(s,n){return i("div",{key:n,staticClass:"viewer-slot-machine-item-container"},[e.titles[n]?i("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:a}){return[i("span",e._g({class:e.titleClass},a),[e._v(" "+e._s(e.titles[n])+" ")])]}}],null,!0)},[e._v(" "+e._s(e.titles[n])+" ")]):e._e(),i("v-sheet",{staticClass:"viewer-slot-machine-item",attrs:{elevation:"5",height:e.slotHeight,width:e.slotWidth}},[e.isText?i("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function({on:a}){return[i("span",e._g({ref:"viewerSlotMachineText",refInFor:!0,class:["viewer-slot-machine-item-text",`slot${n+1}`],domProps:{innerHTML:e._s(e.answersMetaData.slotMachinMetaData[n])}},a))]}}],null,!0)},[i("span",{domProps:{innerHTML:e._s(e.answersMetaData.slotMachinMetaData[n])}})]):e._e(),e.isImage?i("div",{staticClass:"viewer-slot-machine-image-container",on:{click:function(a){return e.openImagePreview(n)}}},[i("img",{ref:"viewerSlotMachineImage",refInFor:!0,staticClass:"viewer-slot-machine-image",attrs:{src:e.getSlotImage(n)}})]):e._e(),e.isVideo?[i("transition-group",{staticClass:"viewer-slot-machine-item-video",attrs:{name:"viewer-slot-machine-item-video",tag:"div"}},e._l(e.slotDataContent[n],function(a,c){return i("TVideoPlayer",{directives:[{name:"show",rawName:"v-show",value:e.showedVideosIndexesMap[n]===c,expression:"showedVideosIndexesMap[index] === videoIndex"}],key:a.hash,attrs:{serviceType:e.serviceType,showDescription:!1,video:a}})}),1)]:e._e()],2)],1)}),0),e.showSpinsCount?i("div",{class:e.spinsRemainClasses},[e._v(" "+e._s(e.$t("viewer.slot-machine.spins-remaining",{spins:e.answersMetaData.spinsRemaining}))+" ")]):e._e(),i("div",[i("v-btn",{staticClass:"white--text viewer-slot-machine-start-button",attrs:{color:"#536BC0",disabled:e.isDisabledSpinButton,height:"60",loading:e.slotLoading,width:"200"},on:{click:e.slotStart}},[i("v-icon",{staticClass:"viewer-slot-machine-start-button-icon",attrs:{dark:""}},[e._v(" cached ")])],1)],1),i("TLightbox",{attrs:{filesSet:e.lightboxData,index:e.lightboxIndex,serviceType:e.serviceType},on:{close:e.closeImagePreview}})],1)},sn=[],nn=l(en,tn,sn,!1,null,null,null,null);const an=nn.exports,on=Object.freeze(Object.defineProperty({__proto__:null,default:an},Symbol.toStringTag,{value:"Module"}));const rn={name:"viewer-table-component",mixins:[v,me],components:{TLightbox:_e,TVideoPlayer:he},data(){return{tableTypesEnum:F,index:0,serviceType:h}},computed:{isTableEmpty(){return this.content.tableData.reduce((t,e)=>(e.forEach(i=>{i!==""&&(t=!0)}),t),!1)}},methods:{getImageWidth(t){return t.widthPercentage+"%"},getImageUrl(t){return t.isUpload?m(t.url,this.serviceType):t.url},getLightboxData(t){this.lightboxData=[];let e=0;for(const i of t)for(const s of i)if(s.type===F.IMAGE)for(const n of s.value)n.imageIndex=e,e++,this.lightboxData.push({type:F.IMAGE,url:n.isUpload?m(n.url,this.serviceType):n.url})},openImagePreview(t){this.openLightbox(t),document.scrollingElement.style.overflow="hidden"},closeImagePreview(){this.closeLightbox(),document.scrollingElement.style.overflow="auto"}},mounted(){this.getLightboxData(this.content.tableData)}};var ln=function(){var e=this,i=e._self._c;return i("div",{directives:[{name:"show",rawName:"v-show",value:e.isTableEmpty,expression:"isTableEmpty"}],staticClass:"viewer-table-component"},[i("div",{staticClass:"viewer-table-container"},[i("div",{staticClass:"viewer-table-viewer",class:e.content.tableBorders},[i("table",{staticClass:"viewer-table-viewer-container",style:{width:e.content.tableSize+"%"}},[i("tbody",e._l(e.content.tableData,function(s,n){return i("tr",{key:n,staticClass:"viewer-table-viewer-container-tr"},e._l(e.content.tableData[n],function(a,c){return i("td",{key:c,staticClass:"viewer-table-viewer-container-td"},[a.type===e.tableTypesEnum.IMAGE?i("div",{staticClass:"viewer-table-container-image-container"},e._l(a.value,function(d,w){return i("img",{key:w,staticClass:"viewer-table-container-image",style:{width:e.getImageWidth(d)},attrs:{src:e.getImageUrl(d)},on:{click:function(k){return e.openImagePreview(d.imageIndex)}}})}),0):e._e(),a.type===e.tableTypesEnum.VIDEO?e._l(a.value,function(d){return i("TVideoPlayer",{key:d.hash,attrs:{serviceType:e.serviceType,showDescription:!1,video:d}})}):e._e(),a.type===e.tableTypesEnum.TEXT?i("div",{staticClass:"viewer-table-text-view-text",domProps:{innerHTML:e._s(a.value)}}):e._e()],2)}),0)}),0)])])]),i("TLightbox",{attrs:{filesSet:e.lightboxData,index:e.lightboxIndex,serviceType:e.serviceType},on:{close:e.closeImagePreview}})],1)},cn=[],dn=l(rn,ln,cn,!1,null,null,null,null);const un=dn.exports,vn=Object.freeze(Object.defineProperty({__proto__:null,default:un},Symbol.toStringTag,{value:"Module"}));const g={opening:0,choosing:1,countdown:2,recordingVideo:3,viewingVideo:4,previewingScreenshot:5};let A,P,B,j;const pn={computed:{webcamButtons(){return[{id:"upload",onClick:this.upload,icon:{value:"cloud_upload",color:"blue"},condition:this.status===this.viewingVideo||this.status===this.previewingScreenshot,tooltip:"common.media-controls.upload"},{id:"stop",onClick:this.stop,icon:{value:"stop",color:"red"},condition:this.status===this.recordingVideo,tooltip:"common.media-controls.stop"},{id:"stop",onClick:this.beginCountdown,icon:{value:"stop",color:"red"},condition:this.videoCapture&&this.status===this.choosing,tooltip:"common.media-controls.video"},{id:"try-again",onClick:this.retry,icon:{value:"loop",color:"orange"},condition:this.showButton,tooltip:"common.media-controls.try-again"},{id:"photo",onClick:this.takePhoto,icon:{value:"camera_alt",color:"orange"},condition:this.photoCapture&&this.status===this.choosing,tooltip:"common.media-controls.photo"},{id:"download",onClick:this.download,icon:{value:"get_app"},condition:this.status===this.viewingVideo||this.status===this.previewingScreenshot,tooltip:"common.media-controls.download",class:"gray darken1"}].filter(({condition:t})=>t)},showButton(){return this.status===this.recordingVideo||this.status===this.viewingVideo||this.status===this.previewingScreenshot},resolution(){return`
                width: ${this.width}px;
                height: ${this.height}px;
            `},recordingTime(){const t=Math.floor(this.videoRecordingTime/60),e=this.videoRecordingTime-t*60;return`${this.pad(t)}:${this.pad(e)}`}},name:"t-webcam-capture",data(){return{...g,status:0,width:u.webcamRecorderWidth,height:u.webcamRecorderHeight,userMediaOptions:{video:{aspectRatio:u.webcamRecorderWidth/u.webcamRecorderHeight},audio:!0},mediaRecorder:null,mediaStream:null,screenshot:null,videoRecording:null,videoRecordingURL:null,videoRecordingTime:0,timeRecordingIntervalId:null}},props:{photoCapture:{type:Boolean,default:!0},videoCapture:{type:Boolean,default:!0}},mounted(){A=this.$refs.canvas,A.width=this.width,A.height=this.height,P=A.getContext("2d"),B=this.$refs.video},beforeDestroy(){this.release()},methods:{beginRecording(){navigator.mediaDevices.getUserMedia(this.userMediaOptions).then(t=>{this.mediaStream=B.srcObject=t,this.mediaRecorder=new MediaRecorder(t,{mimeType:u.webcamVideoType}),this.mediaRecorder.ondataavailable=e=>{j.push(e.data)},this.status=g.choosing})},release(){this.mediaStream&&this.mediaStream.getTracks().forEach(t=>t.stop())},cleanup(){this.mediaRecorder&&this.mediaRecorder.state==="recording"&&this.mediaRecorder.stop(),this.timeRecordingIntervalId&&(clearInterval(this.timeRecordingIntervalId),this.timeRecordingIntervalId=null),j=[],this.videoRecordingTime=0,this.screenshot=this.videoRecording=this.videoRecordingURL=null},beginCountdown(){this.status=g.countdown,setTimeout(this.record,u.webcamVideoCountdownDurationMS)},record(){this.cleanup(),this.mediaRecorder.start(),this.beginCountingRecordingTime(),this.status=g.recordingVideo},stop(){this.mediaRecorder.stop(),this.mediaRecorder.onstop=()=>{this.videoRecording=new Blob(j,{type:u.webcamVideoType}),this.blobToDataURL(this.videoRecording).then(t=>{this.videoRecordingURL=t,this.status=g.viewingVideo})}},takePhoto(){P.clearRect(0,0,this.width,this.height),P.drawImage(B,0,0,u.webcamRecorderWidth,u.webcamRecorderHeight),this.screenshot=A.toDataURL(u.webcamPhotoType),this.status=g.previewingScreenshot},retry(){this.cleanup(),this.status=g.choosing},reset(){this.release(),this.cleanup(),this.status=g.opening},download(){const t=document.createElement("a");this.status===g.previewingScreenshot?(t.href=this.screenshot,t.download=this.generatePhotoName()):(t.href=this.videoRecordingURL,t.download=this.generateVideoName()),t.click()},upload(){this.status===g.previewingScreenshot?A.toBlob(t=>{this.$emit("upload",Q(new File([t],this.generatePhotoName(),{type:u.webcamPhotoType})))}):this.$emit("upload",Q(new File([this.videoRecording],this.generateVideoName(),{type:u.webcamVideoType})))},beginCountingRecordingTime(){this.timeRecordingIntervalId=setInterval(()=>{this.videoRecordingTime++},1e3)},formatDate(){const t=new Date;return`${t.getFullYear()}-${t.getMonth()}-${t.getDate()} ${t.getHours()}-${t.getMinutes()}`},blobToDataURL(t){return new Promise(e=>{const i=new FileReader;i.readAsDataURL(t),i.onloadend=()=>{e(i.result)}})},generatePhotoName(){return u.webcamPhotoCaptureName.replace("{{date}}",this.formatDate())},generateVideoName(){return u.webcamVideoCaptureName.replace("{{date}}",this.formatDate())},pad(t){return 10>t?`0${t}`:t}}};var mn=function(){var e=this,i=e._self._c;return i("div",{staticClass:"t-webcam-capture",style:e.resolution},[e.status===e.opening?i("v-btn",{staticClass:"t-webcam-capture-turn-on-camera-button",attrs:{color:"success"},on:{click:e.beginRecording}},[e._v(" "+e._s(e.$t("t-webcam-capture.turn-on-camera"))+" ")]):e._e(),i("div",{directives:[{name:"show",rawName:"v-show",value:e.status!==e.opening,expression:"status !== opening"}],staticClass:"recorder"},[e.status===e.recordingVideo?i("div",{attrs:{id:"header"}},[i("div",{staticClass:"indicator-left"},[i("v-icon",{staticClass:"indicator",attrs:{color:"red",indeterminate:""}},[e._v(" fiber_manual_record ")]),e._v(" "+e._s(e.$t("t-webcam-capture.recording"))+" ")],1),i("div",{staticClass:"indicator-right"},[e._v(" "+e._s(e.recordingTime)+" ")])]):e._e(),i("canvas",{directives:[{name:"show",rawName:"v-show",value:e.status===e.previewingScreenshot,expression:"status === previewingScreenshot"}],ref:"canvas"}),i("video",{directives:[{name:"show",rawName:"v-show",value:e.status!==e.previewingScreenshot&&e.status!==e.viewingVideo,expression:"status !== previewingScreenshot && status !== viewingVideo"}],ref:"video",style:e.resolution,attrs:{id:"video-recorder",autoplay:"",muted:""},domProps:{muted:!0}}),e.videoCapture?i("video",{directives:[{name:"show",rawName:"v-show",value:e.status===e.viewingVideo,expression:"status === viewingVideo"}],ref:"preview",style:e.resolution,attrs:{id:"video-preview",autoplay:"",controls:"",src:e.videoRecordingURL}}):e._e(),e.status===e.countdown?i("div",{attrs:{id:"countdown"}},[i("div",{staticClass:"_3 second"},[e._v("3")]),i("div",{staticClass:"_2 second"},[e._v("2")]),i("div",{staticClass:"_1 second"},[e._v("1")])]):e._e(),i("div",{attrs:{id:"t-webcam-controls"}},e._l(e.webcamButtons,function(s){return i("v-tooltip",{key:s.id+s.tooltip,attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:n}){return[i("v-btn",e._g({class:s.class,attrs:{id:s.id,color:"white",fab:""},on:{click:s.onClick}},n),[i("v-icon",{attrs:{color:s.icon.color}},[e._v(" "+e._s(s.icon.value)+" ")])],1)]}}],null,!0)},[e._v(" "+e._s(e.$t(s.tooltip))+" ")])}),1)])],1)},_n=[],hn=l(pn,mn,_n,!1,null,"70b04251",null,null);const gn=hn.exports;const wn={name:"t-media-dialog",components:{TDialog:We,TFileUploader:Ge,TFileList:O,TWebcamCapture:gn},data(){return{isUploading:!1,showOverlay:!1,overlayTimeout:null,tabModel:1}},props:{files:{type:Array,default:()=>[]},extensions:{type:Array,default:()=>u.allSupportedExtensions},serviceType:{type:String,required:!0}},methods:{onUploadingUpdate(t){this.isUploading=t},open(){this.$refs.dialog.open()},close(){this.$refs.dialog.close(),this.onClose()},toggle(){this.$refs.dialog.toggle()},onClose(){var t;(t=this.$refs["webcam-capture"])==null||t.reset()},getFileTags(){return this.previewMode?[]:[{key:"Source",value:"Activity"},{key:"Id",value:this.$store.state.viewer.activityId},{key:"Attachment",value:"Submission"},{key:"Skill",value:this.$store.state.viewer.skill}]},showError(t){this.$store.dispatch("openSnackBar",{status:"error",text:t})},handleUploaded(t){t&&(this.showOverlay=!0,this.overlayTimeout=setTimeout(()=>{this.showOverlay=!1},1e3))},async uploadWebcamCapture(t){this.isUploading=!0;try{t.url=await ie({data:oe({file:t.fileObject,tags:this.getFileTags()}),serviceType:this.serviceType,owner:this.fileOwner}),this.files.push(t),this.handleUploaded(!0)}catch({response:e}){e?this.showError("t-file-uploader.upload-failed"):this.showError("common.connection-lost-error")}finally{this.isUploading=!1,this.$refs.dialog.gotoTab(1)}}},beforeDestroy(){clearTimeout(this.overlayTimeout)},computed:{..._({previewMode:t=>t[r].previewMode,activityId:t=>t[r].activityId,revisionId:t=>t[r].revisionId}),showWebcamPhotoCapture(){return this.extensions.length&&this.extensions.some(t=>u.supportedImageExtensions.includes(t))},showWebcamVideoCapture(){return this.extensions.length&&this.extensions.some(t=>u.supportedVideoExtensions.includes(t))},showWebcamCapture(){return this.showWebcamPhotoCapture||this.showWebcamVideoCapture}}};var fn=function(){var e=this,i=e._self._c;return i("TDialog",{ref:"dialog",staticClass:"t-media-dialog",attrs:{color:"orange",persistent:e.isUploading,title:e.$t("t-media-dialog.record-file-upload")},on:{close:e.onClose},scopedSlots:e._u([{key:"overlay",fn:function(){return[i("v-overlay",{staticClass:"t-media-dialog-upload-overlay",attrs:{absolute:"",color:"#FFFFFF",opacity:"0.86",value:e.showOverlay}},[i("div",{staticClass:"t-media-dialog-upload-overlay-container"},[i("v-icon",{attrs:{color:"#2DC083",size:"40px"}},[e._v(" check_circle ")]),i("span",{staticClass:"t-media-dialog-upload-overlay-container-text"},[e._v(" "+e._s(e.$t("common.files-uploaded-success"))+" ")])],1)])]},proxy:!0},{key:"tabs",fn:function(){return[e.showWebcamCapture?i("v-tab",{staticClass:"t-media-dialog-webcam-capture-tab"},[e._v(" "+e._s(e.$t("t-webcam-capture.use-web-cam"))+" ")]):e._e(),i("v-tab",{staticClass:"t-media-dialog-upload-tab"},[e._v(" "+e._s(e.$t("common.upload"))+" ")])]},proxy:!0},{key:"tab-items",fn:function(){return[e.showWebcamCapture?i("v-tab-item",[i("div",{staticClass:"webcam-tab"},[i("TWebcamCapture",{ref:"webcam-capture",staticClass:"t-media-dialog-webcam-capture",attrs:{id:"webcam-capture",photoCapture:e.showWebcamPhotoCapture,videoCapture:e.showWebcamVideoCapture},on:{upload:e.uploadWebcamCapture}}),e.isUploading?i("div",{staticClass:"t-media-dialog-webcam-uploading"},[i("v-progress-circular",{attrs:{color:"primary",indeterminate:"",size:64}}),i("p",{staticClass:"t-media-dialog-webcam-uploading-text"},[e._v(" "+e._s(e.$t("t-media-dialog.uploading-text"))+" ")])],1):e._e()],1)]):e._e(),i("v-tab-item",[i("div",{staticClass:"upload-tab"},[i("TFileList",{staticClass:"t-media-dialog-file-list",attrs:{edit:"",files:e.files,serviceType:e.serviceType}}),i("TFileUploader",{staticClass:"t-media-dialog-uploading-file",attrs:{extensions:e.extensions,files:e.files,multipleFiles:!0,prompt:e.$t("t-media-dialog.uploading-file"),serviceType:e.serviceType},on:{"update:uploading":e.onUploadingUpdate,uploaded:e.handleUploaded}})],1)])]},proxy:!0},{key:"buttons",fn:function(){return[i("v-spacer"),i("v-btn",{staticClass:"t-media-dialog-close-button",attrs:{color:"blue darken-2",disabled:e.isUploading,text:""},on:{click:e.close}},[e._v(" "+e._s(e.$t("common.close"))+" ")])]},proxy:!0}])})},bn=[],yn=l(wn,fn,bn,!1,null,"96df0337",null,null);const Cn=yn.exports,An="data:image/png;base64,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";const xn={name:"viewer-component-task",mixins:[v,x],components:{TFileList:O,TMediaDialog:Cn},data(){return{allSupportedExtensions:u.allSupportedExtensions,examinationServiceType:U,creationServiceType:h}},answers:{text:"",attachments:()=>[]},computed:{showAttachments(){return this.content.attachments.length},showTextAnswer(){return this.content.textAnswer},showUploadedFilesList(){return this.showFileAnswer&&this.answers.attachments.length},showFileAnswer(){return this.content.fileAnswer},readOnly(){return this.previewMode||this.status===o.AWARDED},mediaExtensions(){var t;return(t=this.content.ext)!=null&&t.length?this.content.ext:this.allSupportedExtensions}},methods:{openMediaDialog(){this.readOnly||this.$refs.mediaDialog.open()}},watch:{"answers.text"(){this.status=o.PENDING,this.answers.text=this.answers.text.trim()},"answers.attachments":{deep:!0,handler(){this.status=o.PENDING}}}};var kn=function(){var e=this,i=e._self._c;return i("div",e._b({staticClass:"viewer-component-task"},"div",{[e.status]:e.status},!1),[i("div",{staticClass:"viewer-task-header"},[i("div",{staticClass:"viewer-task-description-container"},[e.content.optional?i("p",{staticClass:"viewer-task-optional-question-text"},[e._v(" "+e._s(e.$t("common-optional-question"))+" ")]):e._e(),i("p",{staticClass:"viewer-task-description"},[e._v(" "+e._s(e.content.description)+" ")])])]),i("div",{staticClass:"viewer-task-body"},[e.showAttachments?i("div",{staticClass:"viewer-task-attachments"},[i("TFileList",{attrs:{edit:!1,files:e.content.attachments,serviceType:e.creationServiceType,view:!0,viewerMode:""}},[i("v-icon",[e._v(" archive ")]),i("span",{staticClass:"viewer-task-supporting-files-text"},[e._v(" "+e._s(e.$t("task.supporting-files"))+" ")])],1)],1):e._e(),e.showTextAnswer?i("div",{staticClass:"viewer-task-text-answer"},[i("v-textarea",{staticClass:"viewer-task-text-answer-input",attrs:{"auto-grow":"","hide-details":"",placeholder:e.$t("task.type-answer-here"),readonly:e.readOnly,solo:""},model:{value:e.answers.text,callback:function(s){e.$set(e.answers,"text",s)},expression:"answers.text"}})],1):e._e(),e.showUploadedFilesList?i("TFileList",{staticClass:"viewer-task-uploaded-files",attrs:{edit:!e.readOnly,files:e.answers.attachments,serviceType:e.examinationServiceType,viewerMode:""}},[i("v-icon",[e._v(" attachment ")]),i("span",{staticClass:"viewer-task-uploaded-files-text"},[e._v(" "+e._s(e.$t("task.uploaded-files"))+" ")])],1):e._e(),e.showFileAnswer?i("div",{staticClass:"viewer-task-file-answer",on:{click:e.openMediaDialog}},[i("img",{attrs:{height:"37",src:An,width:"128"}}),i("p",{staticClass:"viewer-task-file-answer-text"},[e._v(" "+e._s(e.$t("task.upload-file-use-camera"))+" ")]),i("TMediaDialog",{ref:"mediaDialog",attrs:{extensions:e.mediaExtensions,files:e.answers.attachments,serviceType:e.examinationServiceType}})],1):e._e()],1)])},Sn=[],Tn=l(xn,kn,Sn,!1,null,null,null,null);const Dn=Tn.exports,In=Object.freeze(Object.defineProperty({__proto__:null,default:Dn},Symbol.toStringTag,{value:"Module"}));const Mn={name:"viewer-component-text",mixins:[v]};var En=function(){var e=this,i=e._self._c;return e.content.text?i("div",{staticClass:"viewer-text-component"},[i("div",{staticClass:"viewer-text",domProps:{innerHTML:e._s(e.content.text)}})]):e._e()},Vn=[],On=l(Mn,En,Vn,!1,null,null,null,null);const $n=On.exports,Rn=Object.freeze(Object.defineProperty({__proto__:null,default:$n},Symbol.toStringTag,{value:"Module"}));const Fn={name:"viewer-video-component",data(){return{serviceType:h}},mixins:[v,le],components:{VideoPlayer:ce,StreamPlayer:de,VimeoPlayer:ue,YoutubePlayer:ve},computed:{linkifiedAnswerTextSafeHTML(){return E(V(this.content.citation))}}};var zn=function(){var e=this,i=e._self._c;return i("div",{staticClass:"viewer-video-component"},[e.content.videoSRC?i("div",{staticClass:"viewer-video-component-container"},[e.isSrc?i("VideoPlayer",{attrs:{serviceType:e.serviceType,src:e.content.videoSRC}}):e.isYoutube?i("YoutubePlayer",{attrs:{src:e.content.videoSRC}}):e.isVimeo?i("VimeoPlayer",{attrs:{src:e.content.videoSRC}}):e.isTUMO?i("StreamPlayer",{attrs:{src:e.content.videoSRC}}):e._e()],1):e._e(),i("div",{staticClass:"viewer-video-citation-container"},[e.content.citation?i("p",{staticClass:"viewer-loaded-content-citation",domProps:{innerHTML:e._s(e.content.citation)}}):e._e()])])},Pn=[],Bn=l(Fn,zn,Pn,!1,null,null,null,null);const jn=Bn.exports,Ln=Object.freeze(Object.defineProperty({__proto__:null,default:jn},Symbol.toStringTag,{value:"Module"}));const Un={name:"viewer-component-word-picker",mixins:[v,x],data(){return{feedback:"",isValid:!1,questionCount:null}},answers:()=>({}),created(){this.answers&&this.status===o.REJECTED&&(this.answers={})},methods:{selectOption(t,e){this.$set(this.answers,t,{selectedOptionId:e}),this.readOnly||(this.isValid=Object.keys(this.answers).length===this.questionCount,this.status===o.REJECTED&&(this.status=o.PENDING))},getSelcltOptionValue(t){if(this.answers[t.id]){for(const e of t.options)if(e.id===this.answers[t.id].selectedOptionId)return e.value}else return"----------"}},computed:{readOnly(){return this.status===o.AWARDED||this.previewMode}},mounted(){for(const t of this.content.wordPickerData)t.type==="question"&&this.questionCount++;this.isValid=Object.keys(this.answers).length===this.questionCount}};var qn=function(){var e=this,i=e._self._c;return i("div",e._b({staticClass:"viewer-word-picker-component"},"div",{[e.status]:e.status},!1),[i("div",{staticClass:"viewer-word-picker-header"},[i("span",{staticClass:"viewer-word-picker-header-text"},[e._v(e._s(e.$t("common.word-picker")))]),e._m(0)]),i("div",{staticClass:"viewer-word-picker-result"},e._l(e.content.wordPickerData,function(s,n){return i("span",{key:n},[s.type==="text"?i("span",{staticClass:"viewer-word-picker-result-text"},[e._v(" "+e._s(s.value)+" ")]):s.type==="question"?i("v-menu",{attrs:{bottom:"","offset-y":"",origin:"center center",transition:"slide-y-transition"},scopedSlots:e._u([{key:"activator",fn:function({on:a}){return[i("span",e._g({staticClass:"viewer-word-picker-add-option-button",attrs:{color:"#4e86c6",dark:""}},a),[e._v(" "+e._s(e.getSelcltOptionValue(s))+" ")])]}}],null,!0)},[i("v-list",e._l(s.options,function(a){return i("v-list-item",{key:a.id,on:{click:function(c){return e.selectOption(s.id,a.id)}}},[i("v-list-item-title",[e._v(e._s(a.value))])],1)}),1)],1):e._e()],1)}),0)])},Nn=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"viewer-word-picker-icon"},[e("img",{attrs:{src:et}})])}],Wn=l(Un,qn,Nn,!1,null,null,null,null);const Gn=Wn.exports,Qn=Object.freeze(Object.defineProperty({__proto__:null,default:Gn},Symbol.toStringTag,{value:"Module"}));const Hn={name:"examiner-managed-feedbacks-attachment",components:{TFileList:O},data(){return{isOpen:!1,serviceType:U}},props:{feedbackAttachments:{type:Array,default:()=>[]}},methods:{open(){this.isOpen=!0},close(){this.isOpen=!1}}};var Xn=function(){var e=this,i=e._self._c;return i("div",{staticClass:"examiner-managed-feedbacks"},[i("v-dialog",{attrs:{"max-width":"840"},model:{value:e.isOpen,callback:function(s){e.isOpen=s},expression:"isOpen"}},[i("v-card",{staticClass:"examiner-managed-feedbacks-card",attrs:{height:"640px"}},[i("v-toolbar",{staticClass:"examiner-managed-feedbacks-card-toolbar",attrs:{color:"green",dark:""}},[i("v-toolbar-title",[e._v(" "+e._s(e.$t("common.attach-file"))+" ")])],1),i("v-card-text",{staticClass:"examiner-managed-feedbacks-card-content"},[i("v-divider",{staticClass:"examiner-managed-feedbacks-card-content-divider"}),i("TFileList",{attrs:{files:e.feedbackAttachments,onlyViewFils:"",serviceType:e.serviceType,viewerMode:""}})],1),i("v-card-actions",{staticClass:"examiner-managed-feedbacks-card-actions"},[i("v-spacer"),i("v-btn",{staticClass:"examiner-managed-feedbacks-card-actions-close",attrs:{color:"primary",text:""},on:{click:e.close}},[e._v(" "+e._s(e.$t("common.close"))+" ")])],1)],1)],1)],1)},Yn=[],Jn=l(Hn,Xn,Yn,!1,null,null,null,null);const xe=Jn.exports;const Zn={name:"viewer-files-button"};var Kn=function(){var e=this,i=e._self._c;return i("v-tooltip",{attrs:{left:""},scopedSlots:e._u([{key:"activator",fn:function({on:s}){return[i("v-btn",e._g({staticClass:"viewer-component-feedback-attachments",attrs:{color:"#538CC6",depressed:"",height:"30px",ripple:"",small:""},on:{click:function(n){return e.$emit("openDialog")}}},s),[i("span",{staticClass:"viewer-component-feedback-attachments__text"},[e._v(" "+e._s(e.$t("viewer.attachments-button-text"))+" ")]),i("v-icon",{staticClass:"viewer-component-feedback-attachments__icon"},[e._v(" attachment ")])],1)]}}])},[e._v(" "+e._s(e.$t("common.attach-file"))+" ")])},ea=[],ta=l(Zn,Kn,ea,!1,null,"b0f108e7",null,null);const ke=ta.exports;const ia={name:"viewer-component",components:{ViewerFeedbackFileDialog:xe,ViewerFilesButton:ke,...ot(Object.assign({"/src/viewer/components/activity/ViewerAudio.vue":Ai,"/src/viewer/components/activity/ViewerCode.vue":Ii,"/src/viewer/components/activity/ViewerCollaboration.vue":zi,"/src/viewer/components/activity/ViewerFiles.vue":qi,"/src/viewer/components/activity/ViewerHtml.vue":Xi,"/src/viewer/components/activity/ViewerImage.vue":is,"/src/viewer/components/activity/ViewerImageGallery.vue":ls,"/src/viewer/components/activity/ViewerInteractiveGallery.vue":_s,"/src/viewer/components/activity/ViewerMultimediaQuiz/ViewerMultimediaQuiz.vue":js,"/src/viewer/components/activity/ViewerMultimediaQuiz/components/ViewerMultimediaQuizAudio.vue":bs,"/src/viewer/components/activity/ViewerMultimediaQuiz/components/ViewerMultimediaQuizImage.vue":ks,"/src/viewer/components/activity/ViewerMultimediaQuiz/components/ViewerMultimediaQuizVideo.vue":Ms,"/src/viewer/components/activity/ViewerPlugin.vue":Gs,"/src/viewer/components/activity/ViewerQuiz.vue":Zs,"/src/viewer/components/activity/ViewerSlotMachine.vue":on,"/src/viewer/components/activity/ViewerTable.vue":vn,"/src/viewer/components/activity/ViewerTask.vue":In,"/src/viewer/components/activity/ViewerText.vue":Rn,"/src/viewer/components/activity/ViewerVideo.vue":Ln,"/src/viewer/components/activity/ViewerWordPicker.vue":Qn}))},props:{componentData:{type:Object,default:()=>({})},pageIndex:{type:Number,default:-1},sectionIndex:{type:Number,default:-1},groupIndex:{type:Number,default:-1},componentIndex:{type:Number,default:-1}},methods:{getComponentName(t){return"Viewer"+pe(t)},updateComponentAnswers(t){!this.previewMode&&t!==void 0&&(window.parent.postMessage("x-the-activity-viewer:answer-changed","*"),this.allAnswerMetaData[this.language]=Object.values(this.componentAnswersMetaData),this.allAnswers[this.language]=Object.values(this.componentAnswers),Oe(this.submissionId,{componentAnswers:this.allAnswers,answerMetaData:this.allAnswerMetaData}))},openFeedbackFileDialog(){this.$refs.feedbackFileDialog.open()}},computed:{..._({componentAnswer(t){return t[r].componentAnswers[this.componentData.id]},componentAnswerMetaData(t){return t[r].componentAnswersMetaData[this.componentData.id]},componentAnswers:t=>t[r].componentAnswers,componentAnswersMetaData:t=>t[r].componentAnswersMetaData,language:t=>t[r].language,allAnswers:t=>t[r].allAnswers,allAnswerMetaData:t=>t[r].allAnswerMetaData,previewMode:t=>t[r].previewMode,submissionId:t=>t[r].submissionId}),showFeedback(){var t;return((t=this.componentAnswer)==null?void 0:t.feedback)||this.attachmentsExists},attachmentsExists(){var t,e;return!!((e=(t=this.componentAnswer)==null?void 0:t.feedbackAttachments)!=null&&e.length)}},watch:{componentAnswer:{deep:!0,handler:S.debounce(function(t,e){this.updateComponentAnswers(e)},4e3)},componentAnswerMetaData:{deep:!0,handler:S.debounce(function(t,e){this.updateComponentAnswers(e)},4e3)}}};var sa=function(){var e=this,i=e._self._c;return i("div",{staticClass:"viewer-component",attrs:{componentId:e.componentData.id,componentIndex:e.componentIndex,groupIndex:e.groupIndex,pageIndex:e.pageIndex,sectionIndex:e.sectionIndex}},[e.showFeedback?i("div",{staticClass:"viewer-component-feedback",class:`viewer-component-feedback-${e.componentAnswer.status}`},[i("div",{staticClass:"viewer-component-feedback-text"},[e._v(" "+e._s(e.componentAnswer.feedback)+" ")]),e.attachmentsExists?i("ViewerFilesButton",{on:{openDialog:e.openFeedbackFileDialog}}):e._e(),i("ViewerFeedbackFileDialog",{ref:"feedbackFileDialog",attrs:{feedbackAttachments:e.componentAnswer.feedbackAttachments}})],1):e._e(),i(e.getComponentName(e.componentData.type),{tag:"component",attrs:{id:e.componentData.id,content:e.componentData.content,previewMode:e.previewMode,type:e.componentData.type}})],1)},na=[],aa=l(ia,sa,na,!1,null,null,null,null);const oa=aa.exports;const ra={name:"viewer-group",components:{ViewerComponent:oa},props:{groupData:{type:Object,default:()=>({})},pageIndex:{type:Number,default:-1},sectionIndex:{type:Number,default:-1},groupIndex:{type:Number,default:-1}},computed:{groupStyle(){return`
                width: ${this.groupData.size}%;
            `}}};var la=function(){var e=this,i=e._self._c;return i("div",{staticClass:"viewer-group",style:e.groupStyle,attrs:{groupId:e.groupData.id,groupIndex:e.groupIndex,pageIndex:e.pageIndex,sectionIndex:e.sectionIndex}},e._l(e.groupData.components,function(s,n){return i("ViewerComponent",{key:s.id,attrs:{componentData:s,componentIndex:n,groupIndex:e.groupIndex,pageIndex:e.pageIndex,sectionIndex:e.sectionIndex}})}),1)},ca=[],da=l(ra,la,ca,!1,null,null,null,null);const ua=da.exports;const va={name:"viewer-section",components:{ViewerGroup:ua},props:{sectionData:{type:Object,default:()=>({})},pageIndex:{type:Number,default:-1},sectionIndex:{type:Number,default:-1}}};var pa=function(){var e=this,i=e._self._c;return i("div",{staticClass:"viewer-section",attrs:{pageIndex:e.pageIndex,sectionId:e.sectionData.id,sectionIndex:e.sectionIndex}},[i("div",{staticClass:"viewer-section-groups"},e._l(e.sectionData.groups,function(s,n){return i("ViewerGroup",{key:s.id,attrs:{groupData:s,groupIndex:n,pageIndex:e.pageIndex,sectionIndex:e.sectionIndex}})}),1)])},ma=[],_a=l(va,pa,ma,!1,null,null,null,null);const ha=_a.exports;const ga={name:"viewer-page",props:{pageData:{type:Object,default:()=>({})},pageIndex:{type:Number,default:-1}},components:{ViewerSection:ha}};var wa=function(){var e=this,i=e._self._c;return i("div",{staticClass:"viewer-page",attrs:{pageId:e.pageData.id,pageIndex:e.pageIndex}},[i("div",{staticClass:"viewer-page-title"},[e._v(" "+e._s(e.pageData.title)+" ")]),i("div",{staticClass:"viewer-page-sections"},e._l(e.pageData.sections,function(s,n){return i("ViewerSection",{key:s.id,attrs:{pageIndex:e.pageIndex,sectionData:s,sectionIndex:n}})}),1)])},fa=[],ba=l(ga,wa,fa,!1,null,null,null,null);const ya=ba.exports;const Ca={name:"viewer-submit-button",data(){return{sent:!1,submitStatuses:u.activitySubmitStatuses}},methods:{...te(["checkValidation","sendActivitySubmission","openSubmitStatusDialog","closeSubmitStatusDialog","closeActivtyViewer"]),async submitActivity(){if(this.sent||!await this.checkValidation())return;const{pending:e,sent:i,success:s}=this.submitStatuses;this.openSubmitStatusDialog(this.isAutoExamine?e:i),await I(2e3),await this.sendActivitySubmission(),this.isAutoExamine&&this.openSubmitStatusDialog(s),this.sent=!0,await I(1500),this.closeSubmitStatusDialog(),this.closeActivtyViewer()}},computed:{..._({disabled:t=>t[r].previewMode,ratingEnabled:t=>t[r].ratingEnabled,isBlocked:t=>t[r].isBlocked,isAutoExamine:t=>t[r].isAutoExamine})}};var Aa=function(){var e=this,i=e._self._c;return i("div",{staticClass:"viewer-submit-button",attrs:{blocked:e.isBlocked,sent:e.sent}},[e.isBlocked?i("span",{staticClass:"viewer-submit-button-blocked"},[i("v-icon",{attrs:{color:"#F44336",size:"20px"}},[e._v(" campaign ")]),e._v(" "+e._s(e.$t("viewer.call-coach"))+" ")],1):i("v-btn",{staticClass:"viewer-submit-button-vbtn",attrs:{block:"",color:"#518ac8",dark:!e.disabled,disabled:e.disabled,light:e.disabled},on:{click:e.submitActivity}},[i("span",[e._v(" "+e._s(e.$t("viewer.send-to-exam"))+" ")]),i("v-icon",{staticClass:"viewer-submit-button-vbtn-icon"},[e._v(" send ")])],1)],1)},xa=[],ka=l(Ca,Aa,xa,!1,null,null,null,null);const Sa=ka.exports;const Ta={name:"viewer-reject-dialog",data(){return{rejectCountDialog:!1}},watch:{isBlocked(t){this.rejectCountDialog||t&&this.setRejectDialog(!0)},isWarned(t){this.rejectCountDialog||t&&this.setRejectDialog(!0)}},methods:{setRejectDialog(t){this.rejectCountDialog=t},closeDialog(){this.isBlocked&&we(),this.setRejectDialog(!1)}},computed:{..._({rejectCount:t=>t[r].rejectCount,isBlocked:t=>t[r].isBlocked,isWarned:t=>t[r].isWarned}),dialogAlertText(){const t={rejectCount:this.rejectCount};return this.isBlocked?this.$t("viewer.rejects-count-blocked",t):`${this.$t("viewer.rejects-count",t)} `}}};var Da=function(){var e=this,i=e._self._c;return i("v-dialog",{attrs:{persistent:"",width:"400px"},model:{value:e.rejectCountDialog,callback:function(s){e.rejectCountDialog=s},expression:"rejectCountDialog"}},[i("v-card",{staticClass:"viewer-reject-dialog-card",attrs:{"min-height":"250px"}},[i("v-card-title",{staticClass:"viewer-reject-dialog-card-title"},[i("v-spacer"),i("v-btn",{attrs:{icon:""},on:{click:e.closeDialog}},[i("v-icon",{attrs:{color:"#494952"}},[e._v(" close ")])],1)],1),i("v-card-text",{staticClass:"viewer-reject-dialog-card-text"},[i("v-icon",{staticClass:"viewer-reject-dialog-card-text-icon",attrs:{color:"#FCA637",size:"40px"}},[e._v(" error ")]),i("span",{staticClass:"viewer-reject-dialog-card-text-alert"},[e._v(" "+e._s(e.dialogAlertText)+" ")]),e.isBlocked?i("span",{staticClass:"viewer-reject-dialog-card-text-blocked"},[i("v-icon",{attrs:{color:"#F44336",size:"20px"}},[e._v(" campaign ")]),e._v(" "+e._s(e.$t("viewer.call-coach"))+" ")],1):i("span",{staticClass:"viewer-reject-dialog-card-text-chance",domProps:{innerHTML:e._s(e.$t("viewer.last-chance"))}})],1)],1)],1)},Ia=[],Ma=l(Ta,Da,Ia,!1,null,null,null,null);const Ea=Ma.exports;const Va={name:"viewer-submit-status-dialog",data(){return{isOpen:!1}},computed:{..._({submitStatus:t=>t[r].dialogSubmitStatus}),isPending(){return this.submitStatus.status.name==="pending"}},methods:{getMessageClass(t){return`message-${t}`},getIconId(t){return`icon-${t}`}},watch:{isOpen(t){this.isOpen=t},submitStatus(t){this.isOpen=t.state===!0}}};var Oa=function(){var e=this,i=e._self._c;return i("v-dialog",{attrs:{fullscreen:"","hide-overlay":"",transition:"dialog-bottom-transition"},model:{value:e.isOpen,callback:function(s){e.isOpen=s},expression:"isOpen"}},[i("v-card",{attrs:{id:"submit-status-card"}},[i("div",[e.isPending?i("v-progress-circular",{attrs:{color:"#536BC0",indeterminate:""}}):i("v-icon",{attrs:{id:e.getIconId(e.submitStatus.status.name)}},[e._v(" "+e._s(e.submitStatus.status.icon)+" ")]),i("p",{class:e.getMessageClass(e.submitStatus.status.name)},[e._v(" "+e._s(this.$t(e.submitStatus.status.message))+" ")])],1)])],1)},$a=[],Ra=l(Va,Oa,$a,!1,null,null,null,null);const Fa=Ra.exports;const za={name:"viewer360",components:{ViewerRejectDialog:Ea,ViewerProgressBar:vt,ViewerHeader:vi,ViewerPagination:gi,ViewerPage:ya,ViewerSubmitButton:Sa,ViewerFilesButton:ke,ViewerFeedbackFileDialog:xe,ViewerSubmitStatusDialog:Fa},data(){return{progress:0,scroll:0,paddingBottom:0,scrollTimeoutId:null,loaded:!1}},beforeCreate(){this.$store.registerModule(r,oi()),this.$store.dispatch("Startup").then(()=>{this.$store.state[r].language&&(this.$i18n.locale=this.$store.state[r].language),this.loaded=!0})},beforeMount(){window.addEventListener("scroll",this.handleScroll)},beforeDestroy(){window.removeEventListener("scroll",this.handleScroll),this.$store.unregisterModule(r)},computed:{..._({activity:t=>t[r].activityData,activityType:t=>t[r].activityType,activityId:t=>t[r].activityId,status:t=>t[r].status,feedback:t=>t[r].feedback,feedbackAttachments:t=>t[r].feedbackAttachments??[],disableScrolling:t=>t[r].disableScrolling}),showActivitySubmitButton(){return this.activityType!==$e}},methods:{handleScroll(){clearTimeout(this.scrollTimeoutId),this.scrollTimeoutId=setTimeout(this.handleProgress,66)},handleProgress(){const t=document.scrollingElement;this.scroll=t.scrollTop,this.progress=t.scrollTop/((t.scrollHeight-window.innerHeight)/100)},openFeedbackFileDialog(){this.$refs.feedbackFileDialog.open()}}};var Pa=function(){var e=this,i=e._self._c;return i("div",{class:{loaded:e.loaded},attrs:{id:"viewer360"}},[i("ViewerProgressBar",{attrs:{progress:e.progress}}),i("ViewerHeader",{attrs:{activityIconId:e.activity.icon,activityTitle:e.activity.title}}),i("div",{staticClass:"viewer-container"},[i("ViewerPagination",{attrs:{content:e.activity.content,scroll:e.scroll}}),i("div",{ref:"viewer-content",class:{"disable-scrolling":e.disableScrolling},attrs:{id:"viewer-content"}},[i("div",{attrs:{id:"viewer-content-wrapper"}},[e.feedback||e.feedbackAttachments.length?i("div",{staticClass:"final-feedback",class:`final-feedback-${e.status}`},[i("div",{staticClass:"viewer-content-final-feedback-text"},[e._v(" "+e._s(e.feedback)+" ")]),e.feedbackAttachments.length?i("ViewerFilesButton",{on:{openDialog:e.openFeedbackFileDialog}}):e._e()],1):e._e(),e._l(e.activity.content,function(s,n){return i("ViewerPage",{key:s.id,attrs:{pageData:s,pageIndex:n}})}),i("ViewerRejectDialog"),i("ViewerSubmitStatusDialog"),e.showActivitySubmitButton?i("ViewerSubmitButton"):e._e()],2)])],1),i("ViewerFeedbackFileDialog",{ref:"feedbackFileDialog",attrs:{feedbackAttachments:e.feedbackAttachments}})],1)},Ba=[],ja=l(za,Pa,Ba,!1,null,null,null,null);const La=ja.exports;const Ua={name:"app",components:{Viewer:La,TSnackbar:rt},computed:_(["snackbarOpen","snackbarText","snackbarData","snackbarStatus","snackbarTimeout","snackbarMultiline","snackbarCloseButtonDisplayed"]),methods:{snackbarClosed(){this.$store.commit("setSnackbarOpen",!1)}}};var qa=function(){var e=this,i=e._self._c;return i("div",{attrs:{id:"app"}},[i("v-app",[i("Viewer"),i("TSnackbar",{ref:"snackbar",attrs:{isCloseButtonDisplayed:e.snackbarCloseButtonDisplayed,isOpen:e.snackbarOpen,"multi-line":e.snackbarMultiline,status:e.snackbarStatus,timeout:e.snackbarTimeout},on:{close:e.snackbarClosed}},[i("span",[e._v(" "+e._s(e.$t(e.snackbarText,e.snackbarData))+" ")])])],1)],1)},Na=[],Wa=l(Ua,qa,Na,!1,null,null,null,null);const Ga=Wa.exports;p.use(ne);const Se=new ne.Store({state:{snackbarOpen:!1,snackbarText:"",snackbarData:"",snackbarStatus:"notification",snackbarTimeout:3e3,snackbarMultiline:!1,snackbarCloseButtonDisplayed:!1},mutations:{setSnackbarOpen(t,e){t.snackbarOpen=e},setSnackbarText(t,e){t.snackbarText=e},setSnackbarData(t,e){t.snackbarData=e},setSnackbarStatus(t,e){t.snackbarStatus=e},setSnackbarTimeout(t,e){t.snackbarTimeout=e},setSnackbarMultiline(t,e){t.snackbarMultiline=e},setSnackbarCloseButtonDisplayed(t,e){t.snackbarCloseButtonDisplayed=e}},actions:{openSnackBar({commit:t},{status:e="notification",timeout:i=6e3,multiline:s=!1,text:n="",data:a={},closeButton:c=!0}){t("setSnackbarOpen",!0),t("setSnackbarStatus",e),t("setSnackbarTimeout",i),t("setSnackbarMultiline",s),t("setSnackbarText",n),t("setSnackbarData",a),t("setSnackbarCloseButtonDisplayed",c)}}});window.store=Se;p.use(ae);p.use($);function T(t){return t&&t.Math==Math?t:void 0}const b=typeof globalThis=="object"&&T(globalThis)||typeof window=="object"&&T(window)||typeof self=="object"&&T(self)||typeof global=="object"&&T(global)||function(){return this}()||{};function Qa(t,e,i){const s=i||b,n=s.__SENTRY__=s.__SENTRY__||{};return n[t]||(n[t]=e())}const Ha="Sentry Logger ",M=["debug","info","warn","error","log","assert","trace"];function Xa(t){if(!("console"in b))return t();const e=b.console,i={};M.forEach(s=>{const n=e[s]&&e[s].__sentry_original__;s in e&&n&&(i[s]=e[s],e[s]=n)});try{return t()}finally{Object.keys(i).forEach(s=>{e[s]=i[s]})}}function K(){let t=!1;const e={enable:()=>{t=!0},disable:()=>{t=!1}};return typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__?M.forEach(i=>{e[i]=(...s)=>{t&&Xa(()=>{b.console[i](`${Ha}[${i}]:`,...s)})}}):M.forEach(i=>{e[i]=()=>{}}),e}typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__?Qa("logger",K):K();function ee(t,e){if(!Array.isArray(t))return"";const i=[];for(let s=0;s<t.length;s++){const n=t[s];try{i.push(String(n))}catch{i.push("[value cannot be serialized]")}}return i.join(e)}function Ya(t,e,i){if(!(e in t))return;const s=t[e],n=i(s);if(typeof n=="function")try{Za(n,s)}catch{}t[e]=n}function Ja(t,e,i){Object.defineProperty(t,e,{value:i,writable:!0,configurable:!0})}function Za(t,e){const i=e.prototype||{};t.prototype=e.prototype=i,Ja(t,"__sentry_original__",e)}const Ka=["fatal","error","warning","log","info","debug"];function eo(t){return t==="warn"?"warning":Ka.includes(t)?t:"log"}class C{static __initStatic(){this.id="CaptureConsole"}__init(){this.name=C.id}__init2(){this._levels=M}constructor(e={}){C.prototype.__init.call(this),C.prototype.__init2.call(this),e.levels&&(this._levels=e.levels)}setupOnce(e,i){"console"in b&&this._levels.forEach(s=>{s in b.console&&Ya(b.console,s,n=>(...a)=>{const c=i();c.getIntegration(C)&&c.withScope(d=>{d.setLevel(eo(s)),d.setExtra("arguments",a),d.addEventProcessor(k=>(k.logger="console",k));let w=ee(a," ");s==="assert"?a[0]===!1&&(w=`Assertion failed: ${ee(a.slice(1)," ")||"console.assert"}`,d.setExtra("arguments",a.slice(1)),c.captureMessage(w)):s==="error"&&a[0]instanceof Error?c.captureException(a[0]):c.captureMessage(w)}),n&&n.apply(b.console,a)})})}}C.__initStatic();if(y("VITE_SENTRY_DSN_VIEWER")){const t=Re.includes(y("VITE_DOMAIN_NAME"));Fe({Vue:p,dsn:y("VITE_SENTRY_DSN_VIEWER"),environment:ze(y("VITE_DOMAIN_NAME")),integrations:[new Pe({tracePropagationTargets:["localhost",Be,/^\//]}),new je({maskAllText:!0,blockAllMedia:!0,stickySession:!0}),new C],tracesSampleRate:1,replaysSessionSampleRate:0,replaysOnErrorSampleRate:t?1:0}),se("domain.name",y("VITE_DOMAIN_NAME"))}if(!Le())alert("An issue occured, please contact a coach");else{p.config.productionTip=!1;const t=Ue();new p({vuetify:qe,i18n:t,store:Se,render:e=>e(Ga)}).$mount("#app")}